"use strict";(self.webpackChunkwebsite_cyt=self.webpackChunkwebsite_cyt||[]).push([[351],{8667:function(t,e,n){function r(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}n.d(e,{a:function(){return r}})},7267:function(t,e,n){n.d(e,{c:function(){return u},p:function(){return c}});const r=Math.PI,i=2*r,a=1e-6,o=i-a;function s(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function c(){return new s}function u(t){return function(){return t}}s.prototype=c.prototype={constructor:s,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,i,o){t=+t,e=+e,n=+n,i=+i,o=+o;var s=this._x1,c=this._y1,u=n-t,l=i-e,d=s-t,h=c-e,f=d*d+h*h;if(o<0)throw new Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>a)if(Math.abs(h*u-l*d)>a&&o){var g=n-s,p=i-c,v=u*u+l*l,y=g*g+p*p,b=Math.sqrt(v),w=Math.sqrt(f),m=o*Math.tan((r-Math.acos((v+f-y)/(2*b*w)))/2),x=m/w,_=m/b;Math.abs(x-1)>a&&(this._+="L"+(t+x*d)+","+(e+x*h)),this._+="A"+o+","+o+",0,0,"+ +(h*g>d*p)+","+(this._x1=t+_*u)+","+(this._y1=e+_*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,s,c,u){t=+t,e=+e,u=!!u;var l=(n=+n)*Math.cos(s),d=n*Math.sin(s),h=t+l,f=e+d,g=1^u,p=u?s-c:c-s;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+h+","+f:(Math.abs(this._x1-h)>a||Math.abs(this._y1-f)>a)&&(this._+="L"+h+","+f),n&&(p<0&&(p=p%i+i),p>o?this._+="A"+n+","+n+",0,1,"+g+","+(t-l)+","+(e-d)+"A"+n+","+n+",0,1,"+g+","+(this._x1=h)+","+(this._y1=f):p>a&&(this._+="A"+n+","+n+",0,"+ +(p>=r)+","+g+","+(this._x1=t+n*Math.cos(c))+","+(this._y1=e+n*Math.sin(c))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}}},4437:function(t,e,n){n.d(e,{c:function(){return at}});var r,i,a,o,s,c,u,l,d=n(9726),h=n(6560),f=/\r\n?/g,g=/\t/g,p=/\f/g,v=function(t){return t.replace(f,"\n").replace(p,"").replace(g,"    ")},y=function(t,e){var n=t||{};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},b=function(t,e){var n=Object.keys(t).filter((function(e){var n=t[e];if(null==n||null==n.match)return!1;var r=n.order;return("number"!=typeof r||!isFinite(r))&&typeof console<"u"&&console.warn("simple-markdown: Invalid order for rule `"+e+"`: "+String(r)),!0}));n.sort((function(e,n){var r=t[e],i=t[n],a=r.order,o=i.order;if(a!==o)return a-o;var s=r.quality?0:1,c=i.quality?0:1;return s!==c?s-c:e<n?-1:e>n?1:0}));var r,i=function e(i,a){var o=[];for(r=a=a||r;i;){var s=null,c=null,u=null,l=NaN,d=0,h=n[0],f=t[h];do{var g=f.order,p=null==a.prevCapture?"":a.prevCapture[0],v=f.match(i,a,p);if(v){var y=f.quality?f.quality(v,a,p):0;y<=l||(s=h,c=f,u=v,l=y)}d++,h=n[d],f=t[h]}while(f&&(!u||f.order===g&&f.quality));if(null==c||null==u)throw new Error("Could not find a matching rule for the below content. The rule with highest `order` should always match content provided to it. Check the definition of `match` for '"+n[n.length-1]+"'. It seems to not match the following source:\n"+i);if(u.index)throw new Error("`match` must return a capture starting at index 0 (the current parse index). Did you forget a ^ at the start of the RegExp?");var b=c.parse(u,e,a);if(Array.isArray(b))Array.prototype.push.apply(o,b);else{if(null==b||"object"!=typeof b)throw new Error("parse() function returned invalid parse result: '".concat(b,"'"));null==b.type&&(b.type=s),o.push(b)}a.prevCapture=u,i=i.substring(a.prevCapture[0].length)}return o};return function(t,n){return!(r=y(n,e)).inline&&!r.disableAutoBlockNewlines&&(t+="\n\n"),r.prevCapture=null,i(v(t),r)}},w=function(t){var e=function(e,n,r){return n.inline?t.exec(e):null};return e.regex=t,e},m=function(t){var e=function(e,n){return n.inline?null:t.exec(e)};return e.regex=t,e},x=function(t){var e=function(e,n){return t.exec(e)};return e.regex=t,e},_="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,k=function(t,e,n){return{$$typeof:_,type:t,key:e??void 0,ref:null,props:n,_owner:null}},S=function(t,e,n,r){n=n||{},r=!(typeof r<"u")||r;var i="";for(var a in n){var o=n[a];Object.prototype.hasOwnProperty.call(n,a)&&o&&(i+=" "+j(a)+'="'+j(o)+'"')}var s="<"+t+i+">";return r?s+e+"</"+t+">":s},E={},L=function(t){if(null==t)return null;try{var e=new URL(t,"https://localhost").protocol;if(0===e.indexOf("javascript:")||0===e.indexOf("vbscript:")||0===e.indexOf("data:"))return null}catch{return null}return t},N=/[<>&"']/g,C={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","/":"&#x2F;","`":"&#96;"},j=function(t){return String(t).replace(N,(function(t){return C[t]}))},T=/\\([^0-9A-Za-z\s])/g,O=function(t){return t.replace(T,"$1")},M=function(t,e,n){var r=n.inline||!1;n.inline=!0;var i=t(e,n);return n.inline=r,i},B=function(t,e,n){return{content:M(e,t[1],n)}},I=function(){return{}},R="(?:[*+-]|\\d+\\.)",P="( *)("+R+") +",A=new RegExp("^"+P),D=new RegExp(P+"[^\\n]*(?:\\n(?!\\1"+R+" )[^\\n]*)*(\n|$)","gm"),$=/\n{2,}$/,X=/^ (?= *`)|(` *) $/g,F=$,G=/ *\n+$/,H=new RegExp("^( *)("+R+") [\\s\\S]+?(?:\n{2,}(?! )(?!\\1"+R+" )\\n*|\\s*\n*$)"),z=/(?:^|\n)( *)$/,q=(r=/^ *\| *| *\| *$/g,i=/ *$/,a=/^ *-+: *$/,o=/^ *:-+: *$/,s=/^ *:-+ *$/,c=function(t){return a.test(t)?"right":o.test(t)?"center":s.test(t)?"left":null},u=function(t,e,n,r){var a=n.inTable;n.inTable=!0;var o=e(t.trim(),n);n.inTable=a;var s=[[]];return o.forEach((function(t,e){"tableSeparator"===t.type?(!r||0!==e&&e!==o.length-1)&&s.push([]):("text"===t.type&&(null==o[e+1]||"tableSeparator"===o[e+1].type)&&(t.content=t.content.replace(i,"")),s[s.length-1].push(t))})),s},{parseTable:(l=function(t){return function(e,n,i){i.inline=!0;var a=u(e[1],n,i,t),o=function(t,e,n,i){return i&&(t=t.replace(r,"")),t.trim().split("|").map(c)}(e[2],0,0,t),s=function(t,e,n,r){return t.trim().split("\n").map((function(t){return u(t,e,n,r)}))}(e[3],n,i,t);return i.inline=!1,{type:"table",header:a,align:o,cells:s}}})(!0),parseNpTable:l(!1),TABLE_REGEX:/^ *(\|.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/,NPTABLE_REGEX:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/}),U="(?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*",Y="\\s*<?((?:\\([^)]*\\)|[^\\s\\\\]|\\\\.)*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*",J=/mailto:/i,W=function(t,e,n){var r=(t[2]||t[1]).replace(/\s+/g," ").toLowerCase();if(e._defs&&e._defs[r]){var i=e._defs[r];n.target=i.target,n.title=i.title}return e._refs=e._refs||{},e._refs[r]=e._refs[r]||[],e._refs[r].push(n),n},V=0,Z={Array:{react:function(t,e,n){for(var r=n.key,i=[],a=0,o=0;a<t.length;a++,o++){n.key=""+a;var s=t[a];if("text"===s.type)for(s={type:"text",content:s.content};a+1<t.length&&"text"===t[a+1].type;a++)s.content+=t[a+1].content;i.push(e(s,n))}return n.key=r,i},html:function(t,e,n){for(var r="",i=0;i<t.length;i++){var a=t[i];if("text"===a.type)for(a={type:"text",content:a.content};i+1<t.length&&"text"===t[i+1].type;i++)a.content+=t[i+1].content;r+=e(a,n)}return r}},heading:{order:V++,match:m(/^ *(#{1,6})([^\n]+?)#* *(?:\n *)+\n/),parse:function(t){function e(e,n,r){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e,n){return{level:t[1].length,content:M(e,t[2].trim(),n)}})),react:function(t,e,n){return k("h"+t.level,n.key,{children:e(t.content,n)})},html:function(t,e,n){return S("h"+t.level,e(t.content,n))}},nptable:{order:V++,match:m(q.NPTABLE_REGEX),parse:q.parseNpTable,react:null,html:null},lheading:{order:V++,match:m(/^([^\n]+)\n *(=|-){3,} *(?:\n *)+\n/),parse:function(t){function e(e,n,r){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e,n){return{type:"heading",level:"="===t[2]?1:2,content:M(e,t[1],n)}})),react:null,html:null},hr:{order:V++,match:m(/^( *[-*_]){3,} *(?:\n *)+\n/),parse:I,react:function(t,e,n){return k("hr",n.key,E)},html:function(t,e,n){return"<hr>"}},codeBlock:{order:V++,match:m(/^(?:    [^\n]+\n*)+(?:\n *)+\n/),parse:function(t){function e(e,n,r){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e,n){return{lang:void 0,content:t[0].replace(/^    /gm,"").replace(/\n+$/,"")}})),react:function(t,e,n){var r=t.lang?"markdown-code-"+t.lang:void 0;return k("pre",n.key,{children:k("code",null,{className:r,children:t.content})})},html:function(t,e,n){var r=t.lang?"markdown-code-"+t.lang:void 0,i=S("code",j(t.content),{class:r});return S("pre",i)}},fence:{order:V++,match:m(/^ *(`{3,}|~{3,}) *(?:(\S+) *)?\n([\s\S]+?)\n?\1 *(?:\n *)+\n/),parse:function(t){function e(e,n,r){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e,n){return{type:"codeBlock",lang:t[2]||void 0,content:t[3]}})),react:null,html:null},blockQuote:{order:V++,match:m(/^( *>[^\n]+(\n[^\n]+)*\n*)+\n{2,}/),parse:function(t){function e(e,n,r){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e,n){return{content:e(t[0].replace(/^ *> ?/gm,""),n)}})),react:function(t,e,n){return k("blockquote",n.key,{children:e(t.content,n)})},html:function(t,e,n){return S("blockquote",e(t.content,n))}},list:{order:V++,match:function(t,e){var n=null==e.prevCapture?"":e.prevCapture[0],r=z.exec(n),i=e._list||!e.inline;return r&&i?(t=r[1]+t,H.exec(t)):null},parse:function(t){function e(e,n,r){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e,n){var r=t[2],i=r.length>1,a=i?+r:void 0,o=t[0].replace(F,"\n").match(D),s=!1,c=o.map((function(t,r){var i=A.exec(t),a=i?i[0].length:0,c=new RegExp("^ {1,"+a+"}","gm"),u=t.replace(c,"").replace(A,""),l=r===o.length-1,d=-1!==u.indexOf("\n\n")||l&&s;s=d;var h,f=n.inline,g=n._list;n._list=!0,d?(n.inline=!1,h=u.replace(G,"\n\n")):(n.inline=!0,h=u.replace(G,""));var p=e(h,n);return n.inline=f,n._list=g,p}));return{ordered:i,start:a,items:c}})),react:function(t,e,n){var r=t.ordered?"ol":"ul";return k(r,n.key,{start:t.start,children:t.items.map((function(t,r){return k("li",""+r,{children:e(t,n)})}))})},html:function(t,e,n){var r=t.items.map((function(t){return S("li",e(t,n))})).join(""),i=t.ordered?"ol":"ul",a={start:t.start};return S(i,r,a)}},def:{order:V++,match:m(/^ *\[([^\]]+)\]: *<?([^\s>]*)>?(?: +["(]([^\n]+)[")])? *\n(?: *\n)*/),parse:function(t){function e(e,n,r){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e,n){var r=t[1].replace(/\s+/g," ").toLowerCase(),i=t[2],a=t[3];return n._refs&&n._refs[r]&&n._refs[r].forEach((function(t){t.target=i,t.title=a})),n._defs=n._defs||{},n._defs[r]={target:i,title:a},{def:r,target:i,title:a}})),react:function(){return null},html:function(){return""}},table:{order:V++,match:m(q.TABLE_REGEX),parse:q.parseTable,react:function(t,e,n){var r=function(e){return null==t.align[e]?{}:{textAlign:t.align[e]}},i=t.header.map((function(t,i){return k("th",""+i,{style:r(i),scope:"col",children:e(t,n)})})),a=t.cells.map((function(t,i){return k("tr",""+i,{children:t.map((function(t,i){return k("td",""+i,{style:r(i),children:e(t,n)})}))})}));return k("table",n.key,{children:[k("thead","thead",{children:k("tr",null,{children:i})}),k("tbody","tbody",{children:a})]})},html:function(t,e,n){var r=function(e){return null==t.align[e]?"":"text-align:"+t.align[e]+";"},i=t.header.map((function(t,i){return S("th",e(t,n),{style:r(i),scope:"col"})})).join(""),a=t.cells.map((function(t){var i=t.map((function(t,i){return S("td",e(t,n),{style:r(i)})})).join("");return S("tr",i)})).join(""),o=S("thead",S("tr",i)),s=S("tbody",a);return S("table",o+s)}},newline:{order:V++,match:m(/^(?:\n *)*\n/),parse:I,react:function(t,e,n){return"\n"},html:function(t,e,n){return"\n"}},paragraph:{order:V++,match:m(/^((?:[^\n]|\n(?! *\n))+)(?:\n *)+\n/),parse:B,react:function(t,e,n){return k("div",n.key,{className:"paragraph",children:e(t.content,n)})},html:function(t,e,n){return S("div",e(t.content,n),{class:"paragraph"})}},escape:{order:V++,match:w(/^\\([^0-9A-Za-z\s])/),parse:function(t){function e(e,n,r){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e,n){return{type:"text",content:t[1]}})),react:null,html:null},tableSeparator:{order:V++,match:function(t,e){return e.inTable?/^ *\| */.exec(t):null},parse:function(){return{type:"tableSeparator"}},react:function(){return" | "},html:function(){return" &vert; "}},autolink:{order:V++,match:w(/^<([^: >]+:\/[^ >]+)>/),parse:function(t){function e(e,n,r){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e,n){return{type:"link",content:[{type:"text",content:t[1]}],target:t[1]}})),react:null,html:null},mailto:{order:V++,match:w(/^<([^ >]+@[^ >]+)>/),parse:function(t){function e(e,n,r){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e,n){var r=t[1],i=t[1];return J.test(i)||(i="mailto:"+i),{type:"link",content:[{type:"text",content:r}],target:i}})),react:null,html:null},url:{order:V++,match:w(/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/),parse:function(t){function e(e,n,r){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e,n){return{type:"link",content:[{type:"text",content:t[1]}],target:t[1],title:void 0}})),react:null,html:null},link:{order:V++,match:w(new RegExp("^\\[("+U+")\\]\\("+Y+"\\)")),parse:function(t){function e(e,n,r){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e,n){return{content:e(t[1],n),target:O(t[2]),title:t[3]}})),react:function(t,e,n){return k("a",n.key,{href:L(t.target),title:t.title,children:e(t.content,n)})},html:function(t,e,n){var r={href:L(t.target),title:t.title};return S("a",e(t.content,n),r)}},image:{order:V++,match:w(new RegExp("^!\\[("+U+")\\]\\("+Y+"\\)")),parse:function(t){function e(e,n,r){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e,n){return{alt:t[1],target:O(t[2]),title:t[3]}})),react:function(t,e,n){return k("img",n.key,{src:L(t.target),alt:t.alt,title:t.title})},html:function(t,e,n){var r={src:L(t.target),alt:t.alt,title:t.title};return S("img","",r,!1)}},reflink:{order:V++,match:w(new RegExp("^\\[("+U+")\\]\\s*\\[([^\\]]*)\\]")),parse:function(t){function e(e,n,r){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e,n){return W(t,n,{type:"link",content:e(t[1],n)})})),react:null,html:null},refimage:{order:V++,match:w(new RegExp("^!\\[("+U+")\\]\\s*\\[([^\\]]*)\\]")),parse:function(t){function e(e,n,r){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e,n){return W(t,n,{type:"image",alt:t[1]})})),react:null,html:null},em:{order:V,match:w(new RegExp("^\\b_((?:__|\\\\[\\s\\S]|[^\\\\_])+?)_\\b|^\\*(?=\\S)((?:\\*\\*|\\\\[\\s\\S]|\\s+(?:\\\\[\\s\\S]|[^\\s\\*\\\\]|\\*\\*)|[^\\s\\*\\\\])+?)\\*(?!\\*)")),quality:function(t){return t[0].length+.2},parse:function(t){function e(e,n,r){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e,n){return{content:e(t[2]||t[1],n)}})),react:function(t,e,n){return k("em",n.key,{children:e(t.content,n)})},html:function(t,e,n){return S("em",e(t.content,n))}},strong:{order:V,match:w(/^\*\*((?:\\[\s\S]|[^\\])+?)\*\*(?!\*)/),quality:function(t){return t[0].length+.1},parse:B,react:function(t,e,n){return k("strong",n.key,{children:e(t.content,n)})},html:function(t,e,n){return S("strong",e(t.content,n))}},u:{order:V++,match:w(/^__((?:\\[\s\S]|[^\\])+?)__(?!_)/),quality:function(t){return t[0].length},parse:B,react:function(t,e,n){return k("u",n.key,{children:e(t.content,n)})},html:function(t,e,n){return S("u",e(t.content,n))}},del:{order:V++,match:w(/^~~(?=\S)((?:\\[\s\S]|~(?!~)|[^\s~\\]|\s(?!~~))+?)~~/),parse:B,react:function(t,e,n){return k("del",n.key,{children:e(t.content,n)})},html:function(t,e,n){return S("del",e(t.content,n))}},inlineCode:{order:V++,match:w(/^(`+)([\s\S]*?[^`])\1(?!`)/),parse:function(t){function e(e,n,r){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e,n){return{content:t[2].replace(X,"$1")}})),react:function(t,e,n){return k("code",n.key,{children:t.content})},html:function(t,e,n){return S("code",j(t.content))}},br:{order:V++,match:x(/^ {2,}\n/),parse:I,react:function(t,e,n){return k("br",n.key,E)},html:function(t,e,n){return"<br>"}},text:{order:V++,match:x(/^[\s\S]+?(?=[^0-9A-Za-z\s\u00c0-\uffff]|\n\n| {2,}\n|\w+:\S|$)/),parse:function(t){function e(e,n,r){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e,n){return{content:t[0]}})),react:function(t,e,n){return t.content},html:function(t,e,n){return j(t.content)}}},Q=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("simple-markdown: outputFor: `property` must be defined. if you just upgraded, you probably need to replace `outputFor` with `reactFor`");var r,i=t.Array||Z.Array,a=i[e];if(!a)throw new Error("simple-markdown: outputFor: to join nodes of type `"+e+"` you must provide an `Array:` joiner rule with that type, Please see the docs for details on specifying an Array rule.");var o=a,s=function n(i,a){return r=a=a||r,Array.isArray(i)?o(i,n,a):t[i.type][e](i,n,a)},c=function(t,e){return r=y(e,n),s(t,r)};return c},K=b(Z),tt=function(t,e){return(e=e||{}).inline=!1,K(t,e)},et=(Q(Z,"react"),Q(Z,"html"),tt);function nt(t){const e=function(t){return t.replace(/\n{2,}/g,"\n").replace(/^\s+/gm,"")}(t),n=et(e);let r=[[]],i=0;function a(t,e){"text"===t.type?t.content.split("\n").forEach(((t,n)=>{0!==n&&(i++,r.push([])),t.split(" ").forEach((t=>{t&&r[i].push({content:t,type:e||"normal"})}))})):("strong"===t.type||"em"===t.type)&&t.content.forEach((e=>{a(e,t.type)}))}return n.forEach((t=>{"paragraph"===t.type&&t.content.forEach((t=>{a(t)}))})),r}function rt(t,e,n){return t.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",e*n-.1+"em").attr("dy",n+"em")}function it(t,e){t.text(""),e.forEach(((e,n)=>{const r=t.append("tspan").attr("font-style","em"===e.type?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight","strong"===e.type?"bold":"normal");0===n?r.text(e.content):r.text(" "+e.content)}))}const at=(t,e="",{style:n="",isTitle:r=!1,classes:i="",useHtmlLabels:a=!0,isNode:o=!0,width:s,addSvgBackground:c=!1}={})=>{if(d.l.info("createText",e,n,r,i,a,o,c),a){const r=function(t){return et(t).map((function t(e){return"text"===e.type?e.content.replace(/\n/g,"<br/>"):"strong"===e.type?`<strong>${e.content.map(t).join("")}</strong>`:"em"===e.type?`<em>${e.content.map(t).join("")}</em>`:"paragraph"===e.type?`<p>${e.content.map(t).join("")}</p>`:""})).join("")}(e);return function(t,e,n,r){const i=t.append("foreignObject"),a=i.append("xhtml:div"),o=e.label,s=e.isNode?"nodeLabel":"edgeLabel";a.html(`<span class="${s} ${r}" `+(e.labelStyle?'style="'+e.labelStyle+'"':"")+">"+o+"</span>"),function(t,e){e&&t.attr("style",e)}(a,e.labelStyle),a.style("display","table-cell"),a.style("white-space","nowrap"),a.style("max-width",n+"px"),a.attr("xmlns","http://www.w3.org/1999/xhtml");let c=a.node().getBoundingClientRect();return c.width===n&&(a.style("display","table"),a.style("white-space","break-spaces"),a.style("width",n+"px"),c=a.node().getBoundingClientRect()),i.style("width",c.width),i.style("height",c.height),i.node()}(t,{isNode:o,label:(0,h.p)(r).replace(/fa[blrs]?:fa-[\w-]+/g,(t=>`<i class='${t.replace(":"," ")}'></i>`)),labelStyle:n.replace("fill:","color:")},s,i)}{const n=nt(e),r=['"',"'",".",",",":",";","!","?","(",")","[","]","{","}"];let i;return n.forEach((t=>{t.forEach((t=>{r.includes(t.content)&&i&&(i.content+=t.content,t.content=""),i=t}))})),function(t,e,n,r=!1){const i=e.append("g");let a=i.insert("rect").attr("class","background");const o=i.append("text").attr("y","-10.1");let s=-1;if(n.forEach((e=>{s++;let n,r=rt(o,s,1.1),i=[...e].reverse(),a=[];for(;i.length;)n=i.pop(),a.push(n),it(r,a),r.node().getComputedTextLength()>t&&(a.pop(),i.push(n),it(r,a),a=[],s++,r=rt(o,s,1.1))})),r){const t=o.node().getBBox(),e=2;return a.attr("x",-e).attr("y",-e).attr("width",t.width+2*e).attr("height",t.height+2*e),i.node()}return o.node()}(s,t,n,c)}}},4115:function(t,e,n){n.d(e,{a:function(){return l},b:function(){return N},c:function(){return d},d:function(){return O},e:function(){return E},f:function(){return M},g:function(){return P},h:function(){return I},i:function(){return b},l:function(){return h},p:function(){return C},s:function(){return L},u:function(){return f}});var r=n(9726),i=n(4437),a=n(6560),o=n(1183),s=n(5560),c=n(3175);const u={extension:(t,e,n)=>{r.l.trace("Making markers for ",n),t.append("defs").append("marker").attr("id",e+"-extensionStart").attr("class","marker extension "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},composition:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-compositionStart").attr("class","marker composition "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},aggregation:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},dependency:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},lollipop:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","white").attr("cx",6).attr("cy",7).attr("r",6)},point:(t,e)=>{t.append("marker").attr("id",e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 12 20").attr("refX",10).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",0).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},circle:(t,e)=>{t.append("marker").attr("id",e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},cross:(t,e)=>{t.append("marker").attr("id",e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},barb:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")}},l=(t,e,n,r)=>{e.forEach((e=>{u[e](t,n,r)}))};const d=(t,e,n,i)=>{let o=t||"";if("object"==typeof o&&(o=o[0]),(0,r.m)((0,r.g)().flowchart.htmlLabels)){o=o.replace(/\\n|\n/g,"<br />"),r.l.info("vertexText"+o);return function(t){const e=(0,r.h)(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),n=e.append("xhtml:div"),i=t.label,a=t.isNode?"nodeLabel":"edgeLabel";return n.html('<span class="'+a+'" '+(t.labelStyle?'style="'+t.labelStyle+'"':"")+">"+i+"</span>"),function(t,e){e&&t.attr("style",e)}(n,t.labelStyle),n.style("display","inline-block"),n.style("white-space","nowrap"),n.attr("xmlns","http://www.w3.org/1999/xhtml"),e.node()}({isNode:i,label:(0,a.p)(o).replace(/fa[blrs]?:fa-[\w-]+/g,(t=>`<i class='${t.replace(":"," ")}'></i>`)),labelStyle:e.replace("fill:","color:")})}{const t=document.createElementNS("http://www.w3.org/2000/svg","text");t.setAttribute("style",e.replace("color:","fill:"));let r=[];r="string"==typeof o?o.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(o)?o:[];for(const e of r){const r=document.createElementNS("http://www.w3.org/2000/svg","tspan");r.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),r.setAttribute("dy","1em"),r.setAttribute("x","0"),n?r.setAttribute("class","title-row"):r.setAttribute("class","row"),r.textContent=e.trim(),t.appendChild(r)}return t}},h=(t,e,n,o)=>{let s;const c=e.useHtmlLabels||(0,r.m)((0,r.g)().flowchart.htmlLabels);s=n||"node default";const u=t.insert("g").attr("class",s).attr("id",e.domId||e.id),l=u.insert("g").attr("class","label").attr("style",e.labelStyle);let h;h=void 0===e.labelText?"":"string"==typeof e.labelText?e.labelText:e.labelText[0];const f=l.node();let g;g="markdown"===e.labelType?(0,i.c)(l,(0,r.b)((0,a.p)(h),(0,r.g)()),{useHtmlLabels:c,width:e.width||(0,r.g)().flowchart.wrappingWidth,classes:"markdown-node-label"}):f.appendChild(d((0,r.b)((0,a.p)(h),(0,r.g)()),e.labelStyle,!1,o));let p=g.getBBox();if((0,r.m)((0,r.g)().flowchart.htmlLabels)){const t=g.children[0],e=(0,r.h)(g);p=t.getBoundingClientRect(),e.attr("width",p.width),e.attr("height",p.height)}const v=e.padding/2;return c?l.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"):l.attr("transform","translate(0, "+-p.height/2+")"),e.centerLabel&&l.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),l.insert("rect",":first-child"),{shapeSvg:u,bbox:p,halfPadding:v,label:l}},f=(t,e)=>{const n=e.node().getBBox();t.width=n.width,t.height=n.height};function g(t,e,n,r){return t.insert("polygon",":first-child").attr("points",r.map((function(t){return t.x+","+t.y})).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+n/2+")")}function p(t,e,n,r){var i=t.x,a=t.y,o=i-r.x,s=a-r.y,c=Math.sqrt(e*e*s*s+n*n*o*o),u=Math.abs(e*n*o/c);r.x<i&&(u=-u);var l=Math.abs(e*n*s/c);return r.y<a&&(l=-l),{x:i+u,y:a+l}}function v(t,e,n,r){var i,a,o,s,c,u,l,d,h,f,g,p,v;if(i=e.y-t.y,o=t.x-e.x,c=e.x*t.y-t.x*e.y,h=i*n.x+o*n.y+c,f=i*r.x+o*r.y+c,!(0!==h&&0!==f&&y(h,f)||(a=r.y-n.y,s=n.x-r.x,u=r.x*n.y-n.x*r.y,l=a*t.x+s*t.y+u,d=a*e.x+s*e.y+u,0!==l&&0!==d&&y(l,d)||(g=i*s-a*o,0===g))))return p=Math.abs(g/2),{x:(v=o*u-s*c)<0?(v-p)/g:(v+p)/g,y:(v=a*c-i*u)<0?(v-p)/g:(v+p)/g}}function y(t,e){return t*e>0}const b=(t,e)=>{var n,r,i=t.x,a=t.y,o=e.x-i,s=e.y-a,c=t.width/2,u=t.height/2;return Math.abs(s)*c>Math.abs(o)*u?(s<0&&(u=-u),n=0===s?0:u*o/s,r=u):(o<0&&(c=-c),n=c,r=0===o?0:c*s/o),{x:i+n,y:a+r}},w={node:function(t,e){return t.intersect(e)},circle:function(t,e,n){return p(t,e,e,n)},ellipse:p,polygon:function(t,e,n){var r=t.x,i=t.y,a=[],o=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY;"function"==typeof e.forEach?e.forEach((function(t){o=Math.min(o,t.x),s=Math.min(s,t.y)})):(o=Math.min(o,e.x),s=Math.min(s,e.y));for(var c=r-t.width/2-o,u=i-t.height/2-s,l=0;l<e.length;l++){var d=e[l],h=e[l<e.length-1?l+1:0],f=v(t,n,{x:c+d.x,y:u+d.y},{x:c+h.x,y:u+h.y});f&&a.push(f)}return a.length?(a.length>1&&a.sort((function(t,e){var r=t.x-n.x,i=t.y-n.y,a=Math.sqrt(r*r+i*i),o=e.x-n.x,s=e.y-n.y,c=Math.sqrt(o*o+s*s);return a<c?-1:a===c?0:1})),a[0]):t},rect:b},m=(t,e)=>{const{shapeSvg:n,bbox:i}=h(t,e,void 0,!0),a=i.width+e.padding+(i.height+e.padding),o=[{x:a/2,y:0},{x:a,y:-a/2},{x:a/2,y:-a},{x:0,y:-a/2}];r.l.info("Question main (Circle)");const s=g(n,a,a,o);return s.attr("style",e.style),f(e,s),e.intersect=function(t){return r.l.warn("Intersect called"),w.polygon(e,o,t)},n};function x(t,e,n,i){const a=[],o=t=>{a.push(t,0)},s=t=>{a.push(0,t)};e.includes("t")?(r.l.debug("add top border"),o(n)):s(n),e.includes("r")?(r.l.debug("add right border"),o(i)):s(i),e.includes("b")?(r.l.debug("add bottom border"),o(n)):s(n),e.includes("l")?(r.l.debug("add left border"),o(i)):s(i),t.attr("stroke-dasharray",a.join(" "))}const _=(t,e,n)=>{const r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);let i=70,a=10;"LR"===n&&(i=10,a=70);const o=r.append("rect").attr("x",-1*i/2).attr("y",-1*a/2).attr("width",i).attr("height",a).attr("class","fork-join");return f(e,o),e.height=e.height+e.padding/2,e.width=e.width+e.padding/2,e.intersect=function(t){return w.rect(e,t)},r},k={rhombus:m,question:m,rect:(t,e)=>{const{shapeSvg:n,bbox:i,halfPadding:a}=h(t,e,"node "+e.classes,!0),o=n.insert("rect",":first-child"),s=i.width+e.padding,c=i.height+e.padding;if(o.attr("class","basic label-container").attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",-i.width/2-a).attr("y",-i.height/2-a).attr("width",s).attr("height",c),e.props){const t=new Set(Object.keys(e.props));e.props.borders&&(x(o,e.props.borders,s,c),t.delete("borders")),t.forEach((t=>{r.l.warn(`Unknown node property ${t}`)}))}return f(e,o),e.intersect=function(t){return w.rect(e,t)},n},labelRect:(t,e)=>{const{shapeSvg:n}=h(t,e,"label",!0);r.l.trace("Classes = ",e.classes);const i=n.insert("rect",":first-child");if(i.attr("width",0).attr("height",0),n.attr("class","label edgeLabel"),e.props){const t=new Set(Object.keys(e.props));e.props.borders&&(x(i,e.props.borders,0,0),t.delete("borders")),t.forEach((t=>{r.l.warn(`Unknown node property ${t}`)}))}return f(e,i),e.intersect=function(t){return w.rect(e,t)},n},rectWithTitle:(t,e)=>{let n;n=e.classes?"node "+e.classes:"node default";const i=t.insert("g").attr("class",n).attr("id",e.domId||e.id),a=i.insert("rect",":first-child"),o=i.insert("line"),s=i.insert("g").attr("class","label"),c=e.labelText.flat?e.labelText.flat():e.labelText;let u="";u="object"==typeof c?c[0]:c,r.l.info("Label text abc79",u,c,"object"==typeof c);const l=s.node().appendChild(d(u,e.labelStyle,!0,!0));let h={width:0,height:0};if((0,r.m)((0,r.g)().flowchart.htmlLabels)){const t=l.children[0],e=(0,r.h)(l);h=t.getBoundingClientRect(),e.attr("width",h.width),e.attr("height",h.height)}r.l.info("Text 2",c);const g=c.slice(1,c.length);let p=l.getBBox();const v=s.node().appendChild(d(g.join?g.join("<br/>"):g,e.labelStyle,!0,!0));if((0,r.m)((0,r.g)().flowchart.htmlLabels)){const t=v.children[0],e=(0,r.h)(v);h=t.getBoundingClientRect(),e.attr("width",h.width),e.attr("height",h.height)}const y=e.padding/2;return(0,r.h)(v).attr("transform","translate( "+(h.width>p.width?0:(p.width-h.width)/2)+", "+(p.height+y+5)+")"),(0,r.h)(l).attr("transform","translate( "+(h.width<p.width?0:-(p.width-h.width)/2)+", 0)"),h=s.node().getBBox(),s.attr("transform","translate("+-h.width/2+", "+(-h.height/2-y+3)+")"),a.attr("class","outer title-state").attr("x",-h.width/2-y).attr("y",-h.height/2-y).attr("width",h.width+e.padding).attr("height",h.height+e.padding),o.attr("class","divider").attr("x1",-h.width/2-y).attr("x2",h.width/2+y).attr("y1",-h.height/2-y+p.height+y).attr("y2",-h.height/2-y+p.height+y),f(e,a),e.intersect=function(t){return w.rect(e,t)},i},choice:(t,e)=>{const n=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=[{x:0,y:14},{x:14,y:0},{x:0,y:-14},{x:-14,y:0}];return n.insert("polygon",":first-child").attr("points",r.map((function(t){return t.x+","+t.y})).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),e.width=28,e.height=28,e.intersect=function(t){return w.circle(e,14,t)},n},circle:(t,e)=>{const{shapeSvg:n,bbox:i,halfPadding:a}=h(t,e,void 0,!0),o=n.insert("circle",":first-child");return o.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",i.width/2+a).attr("width",i.width+e.padding).attr("height",i.height+e.padding),r.l.info("Circle main"),f(e,o),e.intersect=function(t){return r.l.info("Circle intersect",e,i.width/2+a,t),w.circle(e,i.width/2+a,t)},n},doublecircle:(t,e)=>{const{shapeSvg:n,bbox:i,halfPadding:a}=h(t,e,void 0,!0),o=n.insert("g",":first-child"),s=o.insert("circle"),c=o.insert("circle");return s.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",i.width/2+a+5).attr("width",i.width+e.padding+10).attr("height",i.height+e.padding+10),c.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",i.width/2+a).attr("width",i.width+e.padding).attr("height",i.height+e.padding),r.l.info("DoubleCircle main"),f(e,s),e.intersect=function(t){return r.l.info("DoubleCircle intersect",e,i.width/2+a+5,t),w.circle(e,i.width/2+a+5,t)},n},stadium:(t,e)=>{const{shapeSvg:n,bbox:r}=h(t,e,void 0,!0),i=r.height+e.padding,a=r.width+i/4+e.padding,o=n.insert("rect",":first-child").attr("style",e.style).attr("rx",i/2).attr("ry",i/2).attr("x",-a/2).attr("y",-i/2).attr("width",a).attr("height",i);return f(e,o),e.intersect=function(t){return w.rect(e,t)},n},hexagon:(t,e)=>{const{shapeSvg:n,bbox:r}=h(t,e,void 0,!0),i=r.height+e.padding,a=i/4,o=r.width+2*a+e.padding,s=[{x:a,y:0},{x:o-a,y:0},{x:o,y:-i/2},{x:o-a,y:-i},{x:a,y:-i},{x:0,y:-i/2}],c=g(n,o,i,s);return c.attr("style",e.style),f(e,c),e.intersect=function(t){return w.polygon(e,s,t)},n},rect_left_inv_arrow:(t,e)=>{const{shapeSvg:n,bbox:r}=h(t,e,void 0,!0),i=r.width+e.padding,a=r.height+e.padding,o=[{x:-a/2,y:0},{x:i,y:0},{x:i,y:-a},{x:-a/2,y:-a},{x:0,y:-a/2}];return g(n,i,a,o).attr("style",e.style),e.width=i+a,e.height=a,e.intersect=function(t){return w.polygon(e,o,t)},n},lean_right:(t,e)=>{const{shapeSvg:n,bbox:r}=h(t,e,void 0,!0),i=r.width+e.padding,a=r.height+e.padding,o=[{x:-2*a/6,y:0},{x:i-a/6,y:0},{x:i+2*a/6,y:-a},{x:a/6,y:-a}],s=g(n,i,a,o);return s.attr("style",e.style),f(e,s),e.intersect=function(t){return w.polygon(e,o,t)},n},lean_left:(t,e)=>{const{shapeSvg:n,bbox:r}=h(t,e,void 0,!0),i=r.width+e.padding,a=r.height+e.padding,o=[{x:2*a/6,y:0},{x:i+a/6,y:0},{x:i-2*a/6,y:-a},{x:-a/6,y:-a}],s=g(n,i,a,o);return s.attr("style",e.style),f(e,s),e.intersect=function(t){return w.polygon(e,o,t)},n},trapezoid:(t,e)=>{const{shapeSvg:n,bbox:r}=h(t,e,void 0,!0),i=r.width+e.padding,a=r.height+e.padding,o=[{x:-2*a/6,y:0},{x:i+2*a/6,y:0},{x:i-a/6,y:-a},{x:a/6,y:-a}],s=g(n,i,a,o);return s.attr("style",e.style),f(e,s),e.intersect=function(t){return w.polygon(e,o,t)},n},inv_trapezoid:(t,e)=>{const{shapeSvg:n,bbox:r}=h(t,e,void 0,!0),i=r.width+e.padding,a=r.height+e.padding,o=[{x:a/6,y:0},{x:i-a/6,y:0},{x:i+2*a/6,y:-a},{x:-2*a/6,y:-a}],s=g(n,i,a,o);return s.attr("style",e.style),f(e,s),e.intersect=function(t){return w.polygon(e,o,t)},n},rect_right_inv_arrow:(t,e)=>{const{shapeSvg:n,bbox:r}=h(t,e,void 0,!0),i=r.width+e.padding,a=r.height+e.padding,o=[{x:0,y:0},{x:i+a/2,y:0},{x:i,y:-a/2},{x:i+a/2,y:-a},{x:0,y:-a}],s=g(n,i,a,o);return s.attr("style",e.style),f(e,s),e.intersect=function(t){return w.polygon(e,o,t)},n},cylinder:(t,e)=>{const{shapeSvg:n,bbox:r}=h(t,e,void 0,!0),i=r.width+e.padding,a=i/2,o=a/(2.5+i/50),s=r.height+o+e.padding,c="M 0,"+o+" a "+a+","+o+" 0,0,0 "+i+" 0 a "+a+","+o+" 0,0,0 "+-i+" 0 l 0,"+s+" a "+a+","+o+" 0,0,0 "+i+" 0 l 0,"+-s,u=n.attr("label-offset-y",o).insert("path",":first-child").attr("style",e.style).attr("d",c).attr("transform","translate("+-i/2+","+-(s/2+o)+")");return f(e,u),e.intersect=function(t){const n=w.rect(e,t),r=n.x-e.x;if(0!=a&&(Math.abs(r)<e.width/2||Math.abs(r)==e.width/2&&Math.abs(n.y-e.y)>e.height/2-o)){let i=o*o*(1-r*r/(a*a));0!=i&&(i=Math.sqrt(i)),i=o-i,t.y-e.y>0&&(i=-i),n.y+=i}return n},n},start:(t,e)=>{const n=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=n.insert("circle",":first-child");return r.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),f(e,r),e.intersect=function(t){return w.circle(e,7,t)},n},end:(t,e)=>{const n=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=n.insert("circle",":first-child"),i=n.insert("circle",":first-child");return i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),r.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),f(e,i),e.intersect=function(t){return w.circle(e,7,t)},n},note:(t,e)=>{e.useHtmlLabels||(0,r.g)().flowchart.htmlLabels||(e.centerLabel=!0);const{shapeSvg:n,bbox:i,halfPadding:a}=h(t,e,"node "+e.classes,!0);r.l.info("Classes = ",e.classes);const o=n.insert("rect",":first-child");return o.attr("rx",e.rx).attr("ry",e.ry).attr("x",-i.width/2-a).attr("y",-i.height/2-a).attr("width",i.width+e.padding).attr("height",i.height+e.padding),f(e,o),e.intersect=function(t){return w.rect(e,t)},n},subroutine:(t,e)=>{const{shapeSvg:n,bbox:r}=h(t,e,void 0,!0),i=r.width+e.padding,a=r.height+e.padding,o=[{x:0,y:0},{x:i,y:0},{x:i,y:-a},{x:0,y:-a},{x:0,y:0},{x:-8,y:0},{x:i+8,y:0},{x:i+8,y:-a},{x:-8,y:-a},{x:-8,y:0}],s=g(n,i,a,o);return s.attr("style",e.style),f(e,s),e.intersect=function(t){return w.polygon(e,o,t)},n},fork:_,join:_,class_box:(t,e)=>{const n=e.padding/2;let i;i=e.classes?"node "+e.classes:"node default";const a=t.insert("g").attr("class",i).attr("id",e.domId||e.id),s=a.insert("rect",":first-child"),c=a.insert("line"),u=a.insert("line");let l=0,h=4;const g=a.insert("g").attr("class","label");let p=0;const v=e.classData.annotations&&e.classData.annotations[0],y=e.classData.annotations[0]?"«"+e.classData.annotations[0]+"»":"",b=g.node().appendChild(d(y,e.labelStyle,!0,!0));let m=b.getBBox();if((0,r.m)((0,r.g)().flowchart.htmlLabels)){const t=b.children[0],e=(0,r.h)(b);m=t.getBoundingClientRect(),e.attr("width",m.width),e.attr("height",m.height)}e.classData.annotations[0]&&(h+=m.height+4,l+=m.width);let x=e.classData.label;void 0!==e.classData.type&&""!==e.classData.type&&((0,r.g)().flowchart.htmlLabels?x+="&lt;"+e.classData.type+"&gt;":x+="<"+e.classData.type+">");const _=g.node().appendChild(d(x,e.labelStyle,!0,!0));(0,r.h)(_).attr("class","classTitle");let k=_.getBBox();if((0,r.m)((0,r.g)().flowchart.htmlLabels)){const t=_.children[0],e=(0,r.h)(_);k=t.getBoundingClientRect(),e.attr("width",k.width),e.attr("height",k.height)}h+=k.height+4,k.width>l&&(l=k.width);const S=[];e.classData.members.forEach((t=>{const n=(0,o.p)(t);let i=n.displayText;(0,r.g)().flowchart.htmlLabels&&(i=i.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const a=g.node().appendChild(d(i,n.cssStyle?n.cssStyle:e.labelStyle,!0,!0));let s=a.getBBox();if((0,r.m)((0,r.g)().flowchart.htmlLabels)){const t=a.children[0],e=(0,r.h)(a);s=t.getBoundingClientRect(),e.attr("width",s.width),e.attr("height",s.height)}s.width>l&&(l=s.width),h+=s.height+4,S.push(a)})),h+=8;const E=[];if(e.classData.methods.forEach((t=>{const n=(0,o.p)(t);let i=n.displayText;(0,r.g)().flowchart.htmlLabels&&(i=i.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const a=g.node().appendChild(d(i,n.cssStyle?n.cssStyle:e.labelStyle,!0,!0));let s=a.getBBox();if((0,r.m)((0,r.g)().flowchart.htmlLabels)){const t=a.children[0],e=(0,r.h)(a);s=t.getBoundingClientRect(),e.attr("width",s.width),e.attr("height",s.height)}s.width>l&&(l=s.width),h+=s.height+4,E.push(a)})),h+=8,v){let t=(l-m.width)/2;(0,r.h)(b).attr("transform","translate( "+(-1*l/2+t)+", "+-1*h/2+")"),p=m.height+4}let L=(l-k.width)/2;return(0,r.h)(_).attr("transform","translate( "+(-1*l/2+L)+", "+(-1*h/2+p)+")"),p+=k.height+4,c.attr("class","divider").attr("x1",-l/2-n).attr("x2",l/2+n).attr("y1",-h/2-n+8+p).attr("y2",-h/2-n+8+p),p+=8,S.forEach((t=>{(0,r.h)(t).attr("transform","translate( "+-l/2+", "+(-1*h/2+p+4)+")"),p+=k.height+4})),p+=8,u.attr("class","divider").attr("x1",-l/2-n).attr("x2",l/2+n).attr("y1",-h/2-n+8+p).attr("y2",-h/2-n+8+p),p+=8,E.forEach((t=>{(0,r.h)(t).attr("transform","translate( "+-l/2+", "+(-1*h/2+p)+")"),p+=k.height+4})),s.attr("class","outer title-state").attr("x",-l/2-n).attr("y",-h/2-n).attr("width",l+e.padding).attr("height",h+e.padding),f(e,s),e.intersect=function(t){return w.rect(e,t)},a}};let S={};const E=(t,e,n)=>{let i,a;if(e.link){let o;"sandbox"===(0,r.g)().securityLevel?o="_top":e.linkTarget&&(o=e.linkTarget||"_blank"),i=t.insert("svg:a").attr("xlink:href",e.link).attr("target",o),a=k[e.shape](i,e,n)}else a=k[e.shape](t,e,n),i=a;return e.tooltip&&a.attr("title",e.tooltip),e.class&&a.attr("class","node default "+e.class),S[e.id]=i,e.haveCallback&&S[e.id].attr("class",S[e.id].attr("class")+" clickable"),i},L=(t,e)=>{S[e.id]=t},N=()=>{S={}},C=t=>{const e=S[t.id];r.l.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");const n=t.diff||0;return t.clusterNode?e.attr("transform","translate("+(t.x+n-t.width/2)+", "+(t.y-t.height/2-8)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),n};let j={},T={};const O=()=>{j={},T={}},M=(t,e)=>{const n=(0,r.m)((0,r.g)().flowchart.htmlLabels),a="markdown"===e.labelType?(0,i.c)(t,e.label,{style:e.labelStyle,useHtmlLabels:n,addSvgBackground:!0}):d(e.label,e.labelStyle);r.l.info("abc82",e,e.labelType);const o=t.insert("g").attr("class","edgeLabel"),s=o.insert("g").attr("class","label");s.node().appendChild(a);let c,u=a.getBBox();if(n){const t=a.children[0],e=(0,r.h)(a);u=t.getBoundingClientRect(),e.attr("width",u.width),e.attr("height",u.height)}if(s.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"),j[e.id]=o,e.width=u.width,e.height=u.height,e.startLabelLeft){const n=d(e.startLabelLeft,e.labelStyle),r=t.insert("g").attr("class","edgeTerminals"),i=r.insert("g").attr("class","inner");c=i.node().appendChild(n);const a=n.getBBox();i.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),T[e.id]||(T[e.id]={}),T[e.id].startLeft=r,B(c,e.startLabelLeft)}if(e.startLabelRight){const n=d(e.startLabelRight,e.labelStyle),r=t.insert("g").attr("class","edgeTerminals"),i=r.insert("g").attr("class","inner");c=r.node().appendChild(n),i.node().appendChild(n);const a=n.getBBox();i.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),T[e.id]||(T[e.id]={}),T[e.id].startRight=r,B(c,e.startLabelRight)}if(e.endLabelLeft){const n=d(e.endLabelLeft,e.labelStyle),r=t.insert("g").attr("class","edgeTerminals"),i=r.insert("g").attr("class","inner");c=i.node().appendChild(n);const a=n.getBBox();i.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),r.node().appendChild(n),T[e.id]||(T[e.id]={}),T[e.id].endLeft=r,B(c,e.endLabelLeft)}if(e.endLabelRight){const n=d(e.endLabelRight,e.labelStyle),r=t.insert("g").attr("class","edgeTerminals"),i=r.insert("g").attr("class","inner");c=i.node().appendChild(n);const a=n.getBBox();i.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),r.node().appendChild(n),T[e.id]||(T[e.id]={}),T[e.id].endRight=r,B(c,e.endLabelRight)}return a};function B(t,e){(0,r.g)().flowchart.htmlLabels&&t&&(t.style.width=9*e.length+"px",t.style.height="12px")}const I=(t,e)=>{r.l.info("Moving label abc78 ",t.id,t.label,j[t.id]);let n=e.updatedPath?e.updatedPath:e.originalPath;if(t.label){const i=j[t.id];let a=t.x,o=t.y;if(n){const i=s.u.calcLabelPosition(n);r.l.info("Moving label "+t.label+" from (",a,",",o,") to (",i.x,",",i.y,") abc78"),e.updatedPath&&(a=i.x,o=i.y)}i.attr("transform","translate("+a+", "+o+")")}if(t.startLabelLeft){const e=T[t.id].startLeft;let r=t.x,i=t.y;if(n){const e=s.u.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_left",n);r=e.x,i=e.y}e.attr("transform","translate("+r+", "+i+")")}if(t.startLabelRight){const e=T[t.id].startRight;let r=t.x,i=t.y;if(n){const e=s.u.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_right",n);r=e.x,i=e.y}e.attr("transform","translate("+r+", "+i+")")}if(t.endLabelLeft){const e=T[t.id].endLeft;let r=t.x,i=t.y;if(n){const e=s.u.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_left",n);r=e.x,i=e.y}e.attr("transform","translate("+r+", "+i+")")}if(t.endLabelRight){const e=T[t.id].endRight;let r=t.x,i=t.y;if(n){const e=s.u.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_right",n);r=e.x,i=e.y}e.attr("transform","translate("+r+", "+i+")")}},R=(t,e)=>{r.l.warn("abc88 cutPathAtIntersect",t,e);let n=[],i=t[0],a=!1;return t.forEach((t=>{if(r.l.info("abc88 checking point",t,e),((t,e)=>{const n=t.x,r=t.y,i=Math.abs(e.x-n),a=Math.abs(e.y-r),o=t.width/2,s=t.height/2;return i>=o||a>=s})(e,t)||a)r.l.warn("abc88 outside",t,i),i=t,a||n.push(t);else{const o=((t,e,n)=>{r.l.warn(`intersection calc abc89:\n  outsidePoint: ${JSON.stringify(e)}\n  insidePoint : ${JSON.stringify(n)}\n  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);const i=t.x,a=t.y,o=Math.abs(i-n.x),s=t.width/2;let c=n.x<e.x?s-o:s+o;const u=t.height/2,l=Math.abs(e.y-n.y),d=Math.abs(e.x-n.x);if(Math.abs(a-e.y)*s>Math.abs(i-e.x)*u){let t=n.y<e.y?e.y-u-a:a-u-e.y;c=d*t/l;const i={x:n.x<e.x?n.x+c:n.x-d+c,y:n.y<e.y?n.y+l-t:n.y-l+t};return 0===c&&(i.x=e.x,i.y=e.y),0===d&&(i.x=e.x),0===l&&(i.y=e.y),r.l.warn(`abc89 topp/bott calc, Q ${l}, q ${t}, R ${d}, r ${c}`,i),i}{c=n.x<e.x?e.x-s-i:i-s-e.x;let t=l*c/d,a=n.x<e.x?n.x+d-c:n.x-d+c,o=n.y<e.y?n.y+t:n.y-t;return r.l.warn(`sides calc abc89, Q ${l}, q ${t}, R ${d}, r ${c}`,{_x:a,_y:o}),0===c&&(a=e.x,o=e.y),0===d&&(a=e.x),0===l&&(o=e.y),{x:a,y:o}}})(e,i,t);r.l.warn("abc88 inside",t,i,o),r.l.warn("abc88 intersection",o);let s=!1;n.forEach((t=>{s=s||t.x===o.x&&t.y===o.y})),n.some((t=>t.x===o.x&&t.y===o.y))?r.l.warn("abc88 no intersect",o,n):n.push(o),a=!0}})),r.l.warn("abc88 returning points",n),n},P=function(t,e,n,i,a,o){let u=n.points,l=!1;const d=o.node(e.v);var h=o.node(e.w);r.l.info("abc88 InsertEdge: ",n),h.intersect&&d.intersect&&(u=u.slice(1,n.points.length-1),u.unshift(d.intersect(u[0])),r.l.info("Last point",u[u.length-1],h,h.intersect(u[u.length-1])),u.push(h.intersect(u[u.length-1]))),n.toCluster&&(r.l.info("to cluster abc88",i[n.toCluster]),u=R(n.points,i[n.toCluster].node),l=!0),n.fromCluster&&(r.l.info("from cluster abc88",i[n.fromCluster]),u=R(u.reverse(),i[n.fromCluster].node).reverse(),l=!0);const f=u.filter((t=>!Number.isNaN(t.y)));let g;g=("graph"===a||"flowchart"===a)&&n.curve||s.G;const p=(0,c.l)().x((function(t){return t.x})).y((function(t){return t.y})).curve(g);let v;switch(n.thickness){case"normal":v="edge-thickness-normal";break;case"thick":case"invisible":v="edge-thickness-thick";break;default:v=""}switch(n.pattern){case"solid":v+=" edge-pattern-solid";break;case"dotted":v+=" edge-pattern-dotted";break;case"dashed":v+=" edge-pattern-dashed"}const y=t.append("path").attr("d",p(f)).attr("id",n.id).attr("class"," "+v+(n.classes?" "+n.classes:"")).attr("style",n.style);let b="";switch(((0,r.g)().flowchart.arrowMarkerAbsolute||(0,r.g)().state.arrowMarkerAbsolute)&&(b=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,b=b.replace(/\(/g,"\\("),b=b.replace(/\)/g,"\\)")),r.l.info("arrowTypeStart",n.arrowTypeStart),r.l.info("arrowTypeEnd",n.arrowTypeEnd),n.arrowTypeStart){case"arrow_cross":y.attr("marker-start","url("+b+"#"+a+"-crossStart)");break;case"arrow_point":y.attr("marker-start","url("+b+"#"+a+"-pointStart)");break;case"arrow_barb":y.attr("marker-start","url("+b+"#"+a+"-barbStart)");break;case"arrow_circle":y.attr("marker-start","url("+b+"#"+a+"-circleStart)");break;case"aggregation":y.attr("marker-start","url("+b+"#"+a+"-aggregationStart)");break;case"extension":y.attr("marker-start","url("+b+"#"+a+"-extensionStart)");break;case"composition":y.attr("marker-start","url("+b+"#"+a+"-compositionStart)");break;case"dependency":y.attr("marker-start","url("+b+"#"+a+"-dependencyStart)");break;case"lollipop":y.attr("marker-start","url("+b+"#"+a+"-lollipopStart)")}switch(n.arrowTypeEnd){case"arrow_cross":y.attr("marker-end","url("+b+"#"+a+"-crossEnd)");break;case"arrow_point":y.attr("marker-end","url("+b+"#"+a+"-pointEnd)");break;case"arrow_barb":y.attr("marker-end","url("+b+"#"+a+"-barbEnd)");break;case"arrow_circle":y.attr("marker-end","url("+b+"#"+a+"-circleEnd)");break;case"aggregation":y.attr("marker-end","url("+b+"#"+a+"-aggregationEnd)");break;case"extension":y.attr("marker-end","url("+b+"#"+a+"-extensionEnd)");break;case"composition":y.attr("marker-end","url("+b+"#"+a+"-compositionEnd)");break;case"dependency":y.attr("marker-end","url("+b+"#"+a+"-dependencyEnd)");break;case"lollipop":y.attr("marker-end","url("+b+"#"+a+"-lollipopEnd)")}let w={};return l&&(w.updatedPath=u),w.originalPath=n.points,w}},4749:function(t,e,n){n.d(e,{r:function(){return k}});var r=n(7297),i=n(4115),a=n(9726),o=n(4437);function s(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:c(t),edges:u(t)};return(0,r.a)(t.graph())||(e.value=function(t){return(0,r.b)(t,4)}(t.graph())),e}function c(t){return(0,r.m)(t.nodes(),(function(e){var n=t.node(e),i=t.parent(e),a={v:e};return(0,r.a)(n)||(a.value=n),(0,r.a)(i)||(a.parent=i),a}))}function u(t){return(0,r.m)(t.edges(),(function(e){var n=t.edge(e),i={v:e.v,w:e.w};return(0,r.a)(e.name)||(i.name=e.name),(0,r.a)(n)||(i.value=n),i}))}let l={},d={},h={};const f=(t,e)=>(a.l.trace("In isDecendant",e," ",t," = ",d[e].includes(t)),!!d[e].includes(t)),g=(t,e,n,r)=>{a.l.warn("Copying children of ",t,"root",r,"data",e.node(t),r);const i=e.children(t)||[];t!==r&&i.push(t),a.l.warn("Copying (nodes) clusterId",t,"nodes",i),i.forEach((i=>{if(e.children(i).length>0)g(i,e,n,r);else{const o=e.node(i);a.l.info("cp ",i," to ",r," with parent ",t),n.setNode(i,o),r!==e.parent(i)&&(a.l.warn("Setting parent",i,e.parent(i)),n.setParent(i,e.parent(i))),t!==r&&i!==t?(a.l.debug("Setting parent",i,t),n.setParent(i,t)):(a.l.info("In copy ",t,"root",r,"data",e.node(t),r),a.l.debug("Not Setting parent for node=",i,"cluster!==rootId",t!==r,"node!==clusterId",i!==t));const s=e.edges(i);a.l.debug("Copying Edges",s),s.forEach((i=>{a.l.info("Edge",i);const o=e.edge(i.v,i.w,i.name);a.l.info("Edge data",o,r);try{((t,e)=>(a.l.info("Decendants of ",e," is ",d[e]),a.l.info("Edge is ",t),t.v!==e&&t.w!==e&&(d[e]?d[e].includes(t.v)||f(t.v,e)||f(t.w,e)||d[e].includes(t.w):(a.l.debug("Tilt, ",e,",not in decendants"),!1))))(i,r)?(a.l.info("Copying as ",i.v,i.w,o,i.name),n.setEdge(i.v,i.w,o,i.name),a.l.info("newGraph edges ",n.edges(),n.edge(n.edges()[0]))):a.l.info("Skipping copy of edge ",i.v,"--\x3e",i.w," rootId: ",r," clusterId:",t)}catch(s){a.l.error(s)}}))}a.l.debug("Removing node",i),e.removeNode(i)}))},p=(t,e)=>{const n=e.children(t);let r=[...n];for(const i of n)h[i]=t,r=[...r,...p(i,e)];return r},v=(t,e)=>{a.l.trace("Searching",t);const n=e.children(t);if(a.l.trace("Searching children of id ",t,n),n.length<1)return a.l.trace("This is a valid node",t),t;for(const r of n){const n=v(r,e);if(n)return a.l.trace("Found replacement for",t," => ",n),n}},y=t=>l[t]&&l[t].externalConnections&&l[t]?l[t].id:t,b=(t,e)=>{if(a.l.warn("extractor - ",e,s(t),t.children("D")),e>10)return void a.l.error("Bailing out");let n=t.nodes(),i=!1;for(const r of n){const e=t.children(r);i=i||e.length>0}if(i){a.l.debug("Nodes = ",n,e);for(const i of n)if(a.l.debug("Extracting node",i,l,l[i]&&!l[i].externalConnections,!t.parent(i),t.node(i),t.children("D")," Depth ",e),l[i])if(!l[i].externalConnections&&t.children(i)&&t.children(i).length>0){a.l.warn("Cluster without external connections, without a parent and with children",i,e);let n="TB"===t.graph().rankdir?"LR":"TB";l[i]&&l[i].clusterData&&l[i].clusterData.dir&&(n=l[i].clusterData.dir,a.l.warn("Fixing dir",l[i].clusterData.dir,n));const o=new r.G({multigraph:!0,compound:!0}).setGraph({rankdir:n,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel((function(){return{}}));a.l.warn("Old graph before copy",s(t)),g(i,t,o,i),t.setNode(i,{clusterNode:!0,id:i,clusterData:l[i].clusterData,labelText:l[i].labelText,graph:o}),a.l.warn("New graph after copy node: (",i,")",s(o)),a.l.debug("Old graph after copy",s(t))}else a.l.warn("Cluster ** ",i," **not meeting the criteria !externalConnections:",!l[i].externalConnections," no parent: ",!t.parent(i)," children ",t.children(i)&&t.children(i).length>0,t.children("D"),e),a.l.debug(l);else a.l.debug("Not a cluster",i,e);n=t.nodes(),a.l.warn("New list of nodes",n);for(const r of n){const n=t.node(r);a.l.warn(" Now next level",r,n),n.clusterNode&&b(n.graph,e+1)}}else a.l.debug("Done, no node has children",t.nodes())},w=(t,e)=>{if(0===e.length)return[];let n=Object.assign(e);return e.forEach((e=>{const r=t.children(e),i=w(t,r);n=[...n,...i]})),n},m={rect:(t,e)=>{a.l.info("Creating subgraph rect for ",e.id,e);const n=t.insert("g").attr("class","cluster"+(e.class?" "+e.class:"")).attr("id",e.id),r=n.insert("rect",":first-child"),s=(0,a.m)((0,a.g)().flowchart.htmlLabels),c=n.insert("g").attr("class","cluster-label"),u="markdown"===e.labelType?(0,o.c)(c,e.labelText,{style:e.labelStyle,useHtmlLabels:s}):c.node().appendChild((0,i.c)(e.labelText,e.labelStyle,void 0,!0));let l=u.getBBox();if((0,a.m)((0,a.g)().flowchart.htmlLabels)){const t=u.children[0],e=(0,a.h)(u);l=t.getBoundingClientRect(),e.attr("width",l.width),e.attr("height",l.height)}const d=0*e.padding,h=d/2,f=e.width<=l.width+d?l.width+d:e.width;e.width<=l.width+d?e.diff=(l.width-e.width)/2-e.padding/2:e.diff=-e.padding/2,a.l.trace("Data ",e,JSON.stringify(e)),r.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-f/2).attr("y",e.y-e.height/2-h).attr("width",f).attr("height",e.height+d),s?c.attr("transform","translate("+(e.x-l.width/2)+", "+(e.y-e.height/2)+")"):c.attr("transform","translate("+e.x+", "+(e.y-e.height/2)+")");const g=r.node().getBBox();return e.width=g.width,e.height=g.height,e.intersect=function(t){return(0,i.i)(e,t)},n},roundedWithTitle:(t,e)=>{const n=t.insert("g").attr("class",e.classes).attr("id",e.id),r=n.insert("rect",":first-child"),o=n.insert("g").attr("class","cluster-label"),s=n.append("rect"),c=o.node().appendChild((0,i.c)(e.labelText,e.labelStyle,void 0,!0));let u=c.getBBox();if((0,a.m)((0,a.g)().flowchart.htmlLabels)){const t=c.children[0],e=(0,a.h)(c);u=t.getBoundingClientRect(),e.attr("width",u.width),e.attr("height",u.height)}u=c.getBBox();const l=0*e.padding,d=l/2,h=e.width<=u.width+e.padding?u.width+e.padding:e.width;e.width<=u.width+e.padding?e.diff=(u.width+0*e.padding-e.width)/2:e.diff=-e.padding/2,r.attr("class","outer").attr("x",e.x-h/2-d).attr("y",e.y-e.height/2-d).attr("width",h+l).attr("height",e.height+l),s.attr("class","inner").attr("x",e.x-h/2-d).attr("y",e.y-e.height/2-d+u.height-1).attr("width",h+l).attr("height",e.height+l-u.height-3),o.attr("transform","translate("+(e.x-u.width/2)+", "+(e.y-e.height/2-e.padding/3+((0,a.m)((0,a.g)().flowchart.htmlLabels)?5:3))+")");const f=r.node().getBBox();return e.height=f.height,e.intersect=function(t){return(0,i.i)(e,t)},n},noteGroup:(t,e)=>{const n=t.insert("g").attr("class","note-cluster").attr("id",e.id),r=n.insert("rect",":first-child"),a=0*e.padding,o=a/2;r.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-o).attr("y",e.y-e.height/2-o).attr("width",e.width+a).attr("height",e.height+a).attr("fill","none");const s=r.node().getBBox();return e.width=s.width,e.height=s.height,e.intersect=function(t){return(0,i.i)(e,t)},n},divider:(t,e)=>{const n=t.insert("g").attr("class",e.classes).attr("id",e.id),r=n.insert("rect",":first-child"),a=0*e.padding,o=a/2;r.attr("class","divider").attr("x",e.x-e.width/2-o).attr("y",e.y-e.height/2).attr("width",e.width+a).attr("height",e.height+a);const s=r.node().getBBox();return e.width=s.width,e.height=s.height,e.diff=-e.padding/2,e.intersect=function(t){return(0,i.i)(e,t)},n}};let x={};const _=(t,e,n,o)=>{a.l.info("Graph in recursive render: XXX",s(e),o);const c=e.graph().rankdir;a.l.trace("Dir in recursive render - dir:",c);const u=t.insert("g").attr("class","root");e.nodes()?a.l.info("Recursive render XXX",e.nodes()):a.l.info("No nodes found for",e),e.edges().length>0&&a.l.trace("Recursive edges",e.edge(e.edges()[0]));const d=u.insert("g").attr("class","clusters"),h=u.insert("g").attr("class","edgePaths"),f=u.insert("g").attr("class","edgeLabels"),g=u.insert("g").attr("class","nodes");e.nodes().forEach((function(t){const r=e.node(t);if(void 0!==o){const n=JSON.parse(JSON.stringify(o.clusterData));a.l.info("Setting data for cluster XXX (",t,") ",n,o),e.setNode(o.id,n),e.parent(t)||(a.l.trace("Setting parent",t,o.id),e.setParent(t,o.id,n))}if(a.l.info("(Insert) Node XXX"+t+": "+JSON.stringify(e.node(t))),r&&r.clusterNode){a.l.info("Cluster identified",t,r.width,e.node(t));const o=_(g,r.graph,n,e.node(t)),s=o.elem;(0,i.u)(r,s),r.diff=o.diff||0,a.l.info("Node bounds (abc123)",t,r,r.width,r.x,r.y),(0,i.s)(s,r),a.l.warn("Recursive render complete ",s,r)}else e.children(t).length>0?(a.l.info("Cluster - the non recursive path XXX",t,r.id,r,e),a.l.info(v(r.id,e)),l[r.id]={id:v(r.id,e),node:r}):(a.l.info("Node - the non recursive path",t,r.id,r),(0,i.e)(g,e.node(t),c))})),e.edges().forEach((function(t){const n=e.edge(t.v,t.w,t.name);a.l.info("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(t)),a.l.info("Edge "+t.v+" -> "+t.w+": ",t," ",JSON.stringify(e.edge(t))),a.l.info("Fix",l,"ids:",t.v,t.w,"Translateing: ",l[t.v],l[t.w]),(0,i.f)(f,n)})),e.edges().forEach((function(t){a.l.info("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(t))})),a.l.info("#############################################"),a.l.info("###                Layout                 ###"),a.l.info("#############################################"),a.l.info(e),(0,r.l)(e),a.l.info("Graph after layout:",s(e));let p=0;return(t=>w(t,t.children()))(e).forEach((function(t){const n=e.node(t);a.l.info("Position "+t+": "+JSON.stringify(e.node(t))),a.l.info("Position "+t+": ("+n.x,","+n.y,") width: ",n.width," height: ",n.height),n&&n.clusterNode?(0,i.p)(n):e.children(t).length>0?(((t,e)=>{a.l.trace("Inserting cluster");const n=e.shape||"rect";x[e.id]=m[n](t,e)})(d,n),l[n.id].node=n):(0,i.p)(n)})),e.edges().forEach((function(t){const r=e.edge(t);a.l.info("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(r),r);const o=(0,i.g)(h,t,r,l,n,e);(0,i.h)(r,o)})),e.nodes().forEach((function(t){const n=e.node(t);a.l.info(t,n.type,n.diff),"group"===n.type&&(p=n.diff)})),{elem:u,diff:p}},k=(t,e,n,r,o)=>{(0,i.a)(t,n,r,o),(0,i.b)(),(0,i.d)(),x={},d={},h={},l={},a.l.warn("Graph at first:",s(e)),((t,e)=>{!t||e>10?a.l.debug("Opting out, no graph "):(a.l.debug("Opting in, graph "),t.nodes().forEach((function(e){t.children(e).length>0&&(a.l.warn("Cluster identified",e," Replacement id in edges: ",v(e,t)),d[e]=p(e,t),l[e]={id:v(e,t),clusterData:t.node(e)})})),t.nodes().forEach((function(e){const n=t.children(e),r=t.edges();n.length>0?(a.l.debug("Cluster identified",e,d),r.forEach((t=>{t.v!==e&&t.w!==e&&f(t.v,e)^f(t.w,e)&&(a.l.warn("Edge: ",t," leaves cluster ",e),a.l.warn("Decendants of XXX ",e,": ",d[e]),l[e].externalConnections=!0)}))):a.l.debug("Not a cluster ",e,d)})),t.edges().forEach((function(e){const n=t.edge(e);a.l.warn("Edge "+e.v+" -> "+e.w+": "+JSON.stringify(e)),a.l.warn("Edge "+e.v+" -> "+e.w+": "+JSON.stringify(t.edge(e)));let r=e.v,i=e.w;if(a.l.warn("Fix XXX",l,"ids:",e.v,e.w,"Translating: ",l[e.v]," --- ",l[e.w]),l[e.v]&&l[e.w]&&l[e.v]===l[e.w]){a.l.warn("Fixing and trixing link to self - removing XXX",e.v,e.w,e.name),a.l.warn("Fixing and trixing - removing XXX",e.v,e.w,e.name),r=y(e.v),i=y(e.w),t.removeEdge(e.v,e.w,e.name);const o=e.w+"---"+e.v;t.setNode(o,{domId:o,id:o,labelStyle:"",labelText:n.label,padding:0,shape:"labelRect",style:""});const s=JSON.parse(JSON.stringify(n)),c=JSON.parse(JSON.stringify(n));s.label="",s.arrowTypeEnd="none",c.label="",s.fromCluster=e.v,c.toCluster=e.v,t.setEdge(r,o,s,e.name+"-cyclic-special"),t.setEdge(o,i,c,e.name+"-cyclic-special")}else(l[e.v]||l[e.w])&&(a.l.warn("Fixing and trixing - removing XXX",e.v,e.w,e.name),r=y(e.v),i=y(e.w),t.removeEdge(e.v,e.w,e.name),r!==e.v&&(n.fromCluster=e.v),i!==e.w&&(n.toCluster=e.w),a.l.warn("Fix Replacing with XXX",r,i,e.name),t.setEdge(r,i,n,e.name))})),a.l.warn("Adjusted Graph",s(t)),b(t,0),a.l.trace(l))})(e),a.l.warn("Graph after:",s(e)),_(t,e,r)}},7297:function(t,e,n){n.d(e,{G:function(){return Fn},a:function(){return dn},b:function(){return se},d:function(){return Ge},f:function(){return Ze},h:function(){return un},i:function(){return kt},l:function(){return ni},m:function(){return an},p:function(){return En},r:function(){return jn},u:function(){return $n}});var r=n(6560),i=n(5560);function a(t){return"symbol"==typeof t||(0,r.i)(t)&&"[object Symbol]"==(0,i.j)(t)}function o(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var s=i.S?i.S.prototype:void 0,c=s?s.toString:void 0;function u(t){if("string"==typeof t)return t;if((0,r.a)(t))return o(t,u)+"";if(a(t))return c?c.call(t):"";var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}var l=/\s/;var d=/^\s+/;function h(t){return t&&t.slice(0,function(t){for(var e=t.length;e--&&l.test(t.charAt(e)););return e}(t)+1).replace(d,"")}var f=/^[-+]0x[0-9a-f]+$/i,g=/^0b[01]+$/i,p=/^0o[0-7]+$/i,v=parseInt;var y=1/0;function b(t){return t?(t=function(t){if("number"==typeof t)return t;if(a(t))return NaN;if((0,i.C)(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=(0,i.C)(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=h(t);var n=g.test(t);return n||p.test(t)?v(t.slice(2),n?2:8):f.test(t)?NaN:+t}(t),t===y||t===-y?17976931348623157e292*(t<0?-1:1):t==t?t:0):0===t?t:0}function w(t){return t}var m=Object.create,x=function(){function t(){}return function(e){if(!(0,i.C)(e))return{};if(m)return m(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();const _=x;function k(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function S(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var E=Date.now;function L(t){return function(){return t}}var N=function(){try{var t=(0,i.f)(Object,"defineProperty");return t({},"",{}),t}catch{}}();const C=N;var j=C?function(t,e){return C(t,"toString",{configurable:!0,enumerable:!1,value:L(e),writable:!0})}:w;var T,O,M,B=(T=j,O=0,M=0,function(){var t=E(),e=16-(t-M);if(M=t,e>0){if(++O>=800)return arguments[0]}else O=0;return T.apply(void 0,arguments)});const I=B;function R(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function P(t,e,n,r){for(var i=t.length,a=n+(r?1:-1);r?a--:++a<i;)if(e(t[a],a,t))return a;return-1}function A(t){return t!=t}function D(t,e){return!!(null==t?0:t.length)&&function(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):P(t,A,n)}(t,e,0)>-1}var $=/^(?:0|[1-9]\d*)$/;function X(t,e){var n=typeof t;return!!(e=e??9007199254740991)&&("number"==n||"symbol"!=n&&$.test(t))&&t>-1&&t%1==0&&t<e}function F(t,e,n){"__proto__"==e&&C?C(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var G=Object.prototype.hasOwnProperty;function H(t,e,n){var r=t[e];(!G.call(t,e)||!(0,i.D)(r,n)||void 0===n&&!(e in t))&&F(t,e,n)}function z(t,e,n,r){var i=!n;n||(n={});for(var a=-1,o=e.length;++a<o;){var s=e[a],c=r?r(n[s],t[s],s,n,t):void 0;void 0===c&&(c=t[s]),i?F(n,s,c):H(n,s,c)}return n}var q=Math.max;function U(t,e,n){return e=q(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,a=q(r.length-e,0),o=Array(a);++i<a;)o[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(o),k(t,this,s)}}function Y(t,e){return I(U(t,e,w),t+"")}function J(t,e,n){if(!(0,i.C)(n))return!1;var a=typeof e;return!!("number"==a?(0,r.b)(n)&&X(e,n.length):"string"==a&&e in n)&&(0,i.D)(n[e],t)}var W=Object.prototype.hasOwnProperty;function V(t,e){var n=(0,r.a)(t),i=!n&&(0,r.c)(t),a=!n&&!i&&(0,r.d)(t),o=!n&&!i&&!a&&(0,r.e)(t),s=n||i||a||o,c=s?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],u=c.length;for(var l in t)(e||W.call(t,l))&&(!s||!("length"==l||a&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||X(l,u)))&&c.push(l);return c}function Z(t){return(0,r.b)(t)?V(t):(0,r.f)(t)}var Q=Object.prototype.hasOwnProperty;function K(t){if(!(0,i.C)(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=(0,r.g)(t),n=[];for(var a in t)"constructor"==a&&(e||!Q.call(t,a))||n.push(a);return n}function tt(t){return(0,r.b)(t)?V(t,!0):K(t)}var et=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nt=/^\w*$/;function rt(t,e){if((0,r.a)(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!a(t))||(nt.test(t)||!et.test(t)||null!=e&&t in Object(e))}var it=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,at=/\\(\\)?/g,ot=function(t){var e=(0,i.E)(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(it,(function(t,n,r,i){e.push(r?i.replace(at,"$1"):n||t)})),e}));const st=ot;function ct(t){return null==t?"":u(t)}function ut(t,e){return(0,r.a)(t)?t:rt(t,e)?[t]:st(ct(t))}function lt(t){if("string"==typeof t||a(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}function dt(t,e){for(var n=0,r=(e=ut(e,t)).length;null!=t&&n<r;)t=t[lt(e[n++])];return n&&n==r?t:void 0}function ht(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var ft=i.S?i.S.isConcatSpreadable:void 0;function gt(t){return(0,r.a)(t)||(0,r.c)(t)||!!(ft&&t&&t[ft])}function pt(t,e,n,r,i){var a=-1,o=t.length;for(n||(n=gt),i||(i=[]);++a<o;){var s=t[a];e>0&&n(s)?e>1?pt(s,e-1,n,r,i):ht(i,s):r||(i[i.length]=s)}return i}function vt(t){return(null==t?0:t.length)?pt(t,1):[]}const yt=(0,r.o)(Object.getPrototypeOf,Object);var bt=Function.prototype,wt=Object.prototype,mt=bt.toString,xt=wt.hasOwnProperty,_t=mt.call(Object);function kt(t){if(!(0,r.i)(t)||"[object Object]"!=(0,i.j)(t))return!1;var e=yt(t);if(null===e)return!0;var n=xt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&mt.call(n)==_t}function St(t,e,n,r){var i=-1,a=null==t?0:t.length;for(r&&a&&(n=t[++i]);++i<a;)n=e(n,t[i],i,t);return n}function Et(t){var e=this.__data__=new i.L(t);this.size=e.size}Et.prototype.clear=function(){this.__data__=new i.L,this.size=0},Et.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Et.prototype.get=function(t){return this.__data__.get(t)},Et.prototype.has=function(t){return this.__data__.has(t)},Et.prototype.set=function(t,e){var n=this.__data__;if(n instanceof i.L){var r=n.__data__;if(!i.M||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new i.F(r)}return n.set(t,e),this.size=n.size,this};var Lt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Nt=Lt&&"object"==typeof module&&module&&!module.nodeType&&module,Ct=Nt&&Nt.exports===Lt?i.h.Buffer:void 0,jt=Ct?Ct.allocUnsafe:void 0;function Tt(t,e){if(e)return t.slice();var n=t.length,r=jt?jt(n):new t.constructor(n);return t.copy(r),r}function Ot(t,e){for(var n=-1,r=null==t?0:t.length,i=0,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[i++]=o)}return a}function Mt(){return[]}var Bt=Object.prototype.propertyIsEnumerable,It=Object.getOwnPropertySymbols,Rt=It?function(t){return null==t?[]:(t=Object(t),Ot(It(t),(function(e){return Bt.call(t,e)})))}:Mt;const Pt=Rt;var At=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)ht(e,Pt(t)),t=yt(t);return e}:Mt;const Dt=At;function $t(t,e,n){var i=e(t);return(0,r.a)(t)?i:ht(i,n(t))}function Xt(t){return $t(t,Z,Pt)}function Ft(t){return $t(t,tt,Dt)}var Gt=Object.prototype.hasOwnProperty;const Ht=i.h.Uint8Array;function zt(t){var e=new t.constructor(t.byteLength);return new Ht(e).set(new Ht(t)),e}var qt=/\w*$/;var Ut=i.S?i.S.prototype:void 0,Yt=Ut?Ut.valueOf:void 0;function Jt(t,e){var n=e?zt(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Wt(t,e,n){var r=t.constructor;switch(e){case"[object ArrayBuffer]":return zt(t);case"[object Boolean]":case"[object Date]":return new r(+t);case"[object DataView]":return function(t,e){var n=e?zt(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Jt(t,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":return function(t){var e=new t.constructor(t.source,qt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case"[object Symbol]":return function(t){return Yt?Object(Yt.call(t)):{}}(t)}}function Vt(t){return"function"!=typeof t.constructor||(0,r.g)(t)?{}:_(yt(t))}var Zt=r.n&&r.n.isMap,Qt=Zt?(0,r.j)(Zt):function(t){return(0,r.i)(t)&&"[object Map]"==(0,r.h)(t)};const Kt=Qt;var te=r.n&&r.n.isSet,ee=te?(0,r.j)(te):function(t){return(0,r.i)(t)&&"[object Set]"==(0,r.h)(t)};const ne=ee;var re="[object Arguments]",ie="[object Function]",ae="[object Object]",oe={};function se(t,e,n,a,o,s){var c,u=1&e,l=2&e,d=4&e;if(n&&(c=o?n(t,a,o,s):n(t)),void 0!==c)return c;if(!(0,i.C)(t))return t;var h=(0,r.a)(t);if(h){if(c=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Gt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return S(t,c)}else{var f=(0,r.h)(t),g=f==ie||"[object GeneratorFunction]"==f;if((0,r.d)(t))return Tt(t,u);if(f==ae||f==re||g&&!o){if(c=l||g?{}:Vt(t),!u)return l?function(t,e){return z(t,Dt(t),e)}(t,function(t,e){return t&&z(e,tt(e),t)}(c,t)):function(t,e){return z(t,Pt(t),e)}(t,function(t,e){return t&&z(e,Z(e),t)}(c,t))}else{if(!oe[f])return o?t:{};c=Wt(t,f,u)}}s||(s=new Et);var p=s.get(t);if(p)return p;s.set(t,c),ne(t)?t.forEach((function(r){c.add(se(r,e,n,r,t,s))})):Kt(t)&&t.forEach((function(r,i){c.set(i,se(r,e,n,i,t,s))}));var v=h?void 0:(d?l?Ft:Xt:l?tt:Z)(t);return R(v||t,(function(r,i){v&&(r=t[i=r]),H(c,i,se(r,e,n,i,t,s))})),c}oe[re]=oe["[object Array]"]=oe["[object ArrayBuffer]"]=oe["[object DataView]"]=oe["[object Boolean]"]=oe["[object Date]"]=oe["[object Float32Array]"]=oe["[object Float64Array]"]=oe["[object Int8Array]"]=oe["[object Int16Array]"]=oe["[object Int32Array]"]=oe["[object Map]"]=oe["[object Number]"]=oe[ae]=oe["[object RegExp]"]=oe["[object Set]"]=oe["[object String]"]=oe["[object Symbol]"]=oe["[object Uint8Array]"]=oe["[object Uint8ClampedArray]"]=oe["[object Uint16Array]"]=oe["[object Uint32Array]"]=!0,oe["[object Error]"]=oe[ie]=oe["[object WeakMap]"]=!1;function ce(t){return se(t,5)}function ue(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new i.F;++e<n;)this.add(t[e])}function le(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function de(t,e){return t.has(e)}ue.prototype.add=ue.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},ue.prototype.has=function(t){return this.__data__.has(t)};function he(t,e,n,r,i,a){var o=1&n,s=t.length,c=e.length;if(s!=c&&!(o&&c>s))return!1;var u=a.get(t),l=a.get(e);if(u&&l)return u==e&&l==t;var d=-1,h=!0,f=2&n?new ue:void 0;for(a.set(t,e),a.set(e,t);++d<s;){var g=t[d],p=e[d];if(r)var v=o?r(p,g,d,e,t,a):r(g,p,d,t,e,a);if(void 0!==v){if(v)continue;h=!1;break}if(f){if(!le(e,(function(t,e){if(!de(f,e)&&(g===t||i(g,t,n,r,a)))return f.push(e)}))){h=!1;break}}else if(g!==p&&!i(g,p,n,r,a)){h=!1;break}}return a.delete(t),a.delete(e),h}function fe(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function ge(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var pe=i.S?i.S.prototype:void 0,ve=pe?pe.valueOf:void 0;var ye=Object.prototype.hasOwnProperty;var be="[object Arguments]",we="[object Array]",me="[object Object]",xe=Object.prototype.hasOwnProperty;function _e(t,e,n,a,o,s){var c=(0,r.a)(t),u=(0,r.a)(e),l=c?we:(0,r.h)(t),d=u?we:(0,r.h)(e),h=(l=l==be?me:l)==me,f=(d=d==be?me:d)==me,g=l==d;if(g&&(0,r.d)(t)){if(!(0,r.d)(e))return!1;c=!0,h=!1}if(g&&!h)return s||(s=new Et),c||(0,r.e)(t)?he(t,e,n,a,o,s):function(t,e,n,r,a,o,s){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new Ht(t),new Ht(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,i.D)(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var c=fe;case"[object Set]":var u=1&r;if(c||(c=ge),t.size!=e.size&&!u)return!1;var l=s.get(t);if(l)return l==e;r|=2,s.set(t,e);var d=he(c(t),c(e),r,a,o,s);return s.delete(t),d;case"[object Symbol]":if(ve)return ve.call(t)==ve.call(e)}return!1}(t,e,l,n,a,o,s);if(!(1&n)){var p=h&&xe.call(t,"__wrapped__"),v=f&&xe.call(e,"__wrapped__");if(p||v){var y=p?t.value():t,b=v?e.value():e;return s||(s=new Et),o(y,b,n,a,s)}}return!!g&&(s||(s=new Et),function(t,e,n,r,i,a){var o=1&n,s=Xt(t),c=s.length;if(c!=Xt(e).length&&!o)return!1;for(var u=c;u--;){var l=s[u];if(!(o?l in e:ye.call(e,l)))return!1}var d=a.get(t),h=a.get(e);if(d&&h)return d==e&&h==t;var f=!0;a.set(t,e),a.set(e,t);for(var g=o;++u<c;){var p=t[l=s[u]],v=e[l];if(r)var y=o?r(v,p,l,e,t,a):r(p,v,l,t,e,a);if(!(void 0===y?p===v||i(p,v,n,r,a):y)){f=!1;break}g||(g="constructor"==l)}if(f&&!g){var b=t.constructor,w=e.constructor;b!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w)&&(f=!1)}return a.delete(t),a.delete(e),f}(t,e,n,a,o,s))}function ke(t,e,n,i,a){return t===e||(null==t||null==e||!(0,r.i)(t)&&!(0,r.i)(e)?t!=t&&e!=e:_e(t,e,n,i,ke,a))}function Se(t){return t==t&&!(0,i.C)(t)}function Ee(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}function Le(t){var e=function(t){for(var e=Z(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Se(i)]}return e}(t);return 1==e.length&&e[0][2]?Ee(e[0][0],e[0][1]):function(n){return n===t||function(t,e,n,r){var i=n.length,a=i,o=!r;if(null==t)return!a;for(t=Object(t);i--;){var s=n[i];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<a;){var c=(s=n[i])[0],u=t[c],l=s[1];if(o&&s[2]){if(void 0===u&&!(c in t))return!1}else{var d=new Et;if(r)var h=r(u,l,c,t,e,d);if(!(void 0===h?ke(l,u,3,r,d):h))return!1}}return!0}(n,t,e)}}function Ne(t,e){return null!=t&&e in Object(t)}function Ce(t,e,n){for(var i=-1,a=(e=ut(e,t)).length,o=!1;++i<a;){var s=lt(e[i]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++i!=a?o:!!(a=null==t?0:t.length)&&(0,r.k)(a)&&X(s,a)&&((0,r.a)(t)||(0,r.c)(t))}function je(t,e){return null!=t&&Ce(t,e,Ne)}function Te(t,e){return rt(t)&&Se(e)?Ee(lt(t),e):function(n){var r=function(t,e,n){var r=null==t?void 0:dt(t,e);return void 0===r?n:r}(n,t);return void 0===r&&r===e?je(n,t):ke(e,r,3)}}function Oe(t){return rt(t)?function(t){return function(e){return null==e?void 0:e[t]}}(lt(t)):function(t){return function(e){return dt(e,t)}}(t)}function Me(t){return"function"==typeof t?t:null==t?w:"object"==typeof t?(0,r.a)(t)?Te(t[0],t[1]):Le(t):Oe(t)}var Be=function(t){return function(e,n,r){for(var i=-1,a=Object(e),o=r(e),s=o.length;s--;){var c=o[t?s:++i];if(!1===n(a[c],c,a))break}return e}}();const Ie=Be;function Re(t,e){return t&&Ie(t,e,Z)}var Pe=function(t,e){return function(n,i){if(null==n)return n;if(!(0,r.b)(n))return t(n,i);for(var a=n.length,o=e?a:-1,s=Object(n);(e?o--:++o<a)&&!1!==i(s[o],o,s););return n}}(Re);const Ae=Pe;const De=function(){return i.h.Date.now()};var $e=Object.prototype,Xe=$e.hasOwnProperty,Fe=Y((function(t,e){t=Object(t);var n=-1,r=e.length,a=r>2?e[2]:void 0;for(a&&J(e[0],e[1],a)&&(r=1);++n<r;)for(var o=e[n],s=tt(o),c=-1,u=s.length;++c<u;){var l=s[c],d=t[l];(void 0===d||(0,i.D)(d,$e[l])&&!Xe.call(t,l))&&(t[l]=o[l])}return t}));const Ge=Fe;function He(t,e,n){(void 0!==n&&!(0,i.D)(t[e],n)||void 0===n&&!(e in t))&&F(t,e,n)}function ze(t){return(0,r.i)(t)&&(0,r.b)(t)}function qe(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function Ue(t,e,n,a,o,s,c){var u=qe(t,n),l=qe(e,n),d=c.get(l);if(d)He(t,n,d);else{var h=s?s(u,l,n+"",t,e,c):void 0,f=void 0===h;if(f){var g=(0,r.a)(l),p=!g&&(0,r.d)(l),v=!g&&!p&&(0,r.e)(l);h=l,g||p||v?(0,r.a)(u)?h=u:ze(u)?h=S(u):p?(f=!1,h=Tt(l,!0)):v?(f=!1,h=Jt(l,!0)):h=[]:kt(l)||(0,r.c)(l)?(h=u,(0,r.c)(u)?h=function(t){return z(t,tt(t))}(u):(!(0,i.C)(u)||(0,i.k)(u))&&(h=Vt(l))):f=!1}f&&(c.set(l,h),o(h,l,a,s,c),c.delete(l)),He(t,n,h)}}function Ye(t,e,n,r,a){t!==e&&Ie(e,(function(o,s){if(a||(a=new Et),(0,i.C)(o))Ue(t,e,s,n,Ye,r,a);else{var c=r?r(qe(t,s),o,s+"",t,e,a):void 0;void 0===c&&(c=o),He(t,s,c)}}),tt)}function Je(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function We(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}function Ve(t){return"function"==typeof t?t:w}function Ze(t,e){return((0,r.a)(t)?R:Ae)(t,Ve(e))}function Qe(t,e){var n=[];return Ae(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function Ke(t,e){return((0,r.a)(t)?Ot:Qe)(t,Me(e))}var tn=Math.max;var en=function(t){return function(e,n,i){var a=Object(e);if(!(0,r.b)(e)){var o=Me(n);e=Z(e),n=function(t){return o(a[t],t,a)}}var s=t(e,n,i);return s>-1?a[o?e[s]:s]:void 0}}((function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:function(t){var e=b(t),n=e%1;return e==e?n?e-n:e:0}(n);return i<0&&(i=tn(r+i,0)),P(t,Me(e),i)}));const nn=en;function rn(t,e){var n=-1,i=(0,r.b)(t)?Array(t.length):[];return Ae(t,(function(t,r,a){i[++n]=e(t,r,a)})),i}function an(t,e){return((0,r.a)(t)?o:rn)(t,Me(e))}function on(t,e){return t>e}var sn=Object.prototype.hasOwnProperty;function cn(t,e){return null!=t&&sn.call(t,e)}function un(t,e){return null!=t&&Ce(t,e,cn)}function ln(t){return null==t?[]:function(t,e){return o(e,(function(e){return t[e]}))}(t,Z(t))}function dn(t){return void 0===t}function hn(t,e){return t<e}function fn(t,e){var n={};return e=Me(e),Re(t,(function(t,r,i){F(n,r,e(t,r,i))})),n}function gn(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],s=e(o);if(null!=s&&(void 0===c?s==s&&!a(s):n(s,c)))var c=s,u=o}return u}function pn(t){return t&&t.length?gn(t,w,on):void 0}var vn=function(t){return Y((function(e,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(a=t.length>3&&"function"==typeof a?(i--,a):void 0,o&&J(n[0],n[1],o)&&(a=i<3?void 0:a,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,a)}return e}))}((function(t,e,n){Ye(t,e,n)}));const yn=vn;function bn(t){return t&&t.length?gn(t,w,hn):void 0}function wn(t,e){return t&&t.length?gn(t,Me(e),hn):void 0}function mn(t,e,n,r){if(!(0,i.C)(t))return t;for(var a=-1,o=(e=ut(e,t)).length,s=o-1,c=t;null!=c&&++a<o;){var u=lt(e[a]),l=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(a!=s){var d=c[u];void 0===(l=r?r(d,u,c):void 0)&&(l=(0,i.C)(d)?d:X(e[a+1])?[]:{})}H(c,u,l),c=c[u]}return t}function xn(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=a(t),s=void 0!==e,c=null===e,u=e==e,l=a(e);if(!c&&!l&&!o&&t>e||o&&s&&u&&!c&&!l||r&&s&&u||!n&&u||!i)return 1;if(!r&&!o&&!l&&t<e||l&&n&&i&&!r&&!o||c&&n&&i||!s&&i||!u)return-1}return 0}function _n(t,e,n){e=e.length?o(e,(function(t){return(0,r.a)(t)?function(e){return dt(e,1===t.length?t[0]:t)}:t})):[w];var i=-1;return e=o(e,(0,r.j)(Me)),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(rn(t,(function(t,n,r){return{criteria:o(e,(function(e){return e(t)})),index:++i,value:t}})),(function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,a=e.criteria,o=i.length,s=n.length;++r<o;){var c=xn(i[r],a[r]);if(c)return r>=s?c:c*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}))}function kn(t,e){return function(t,e,n){for(var r=-1,i=e.length,a={};++r<i;){var o=e[r],s=dt(t,o);n(s,o)&&mn(a,ut(o,t),s)}return a}(t,e,(function(e,n){return je(t,n)}))}var Sn=function(t){return I(U(t,void 0,vt),t+"")}((function(t,e){return null==t?{}:kn(t,e)}));const En=Sn;var Ln=Math.ceil,Nn=Math.max;var Cn=function(t){return function(e,n,r){return r&&"number"!=typeof r&&J(e,n,r)&&(n=r=void 0),e=b(e),void 0===n?(n=e,e=0):n=b(n),function(t,e,n,r){for(var i=-1,a=Nn(Ln((e-t)/(n||1)),0),o=Array(a);a--;)o[r?a:++i]=t,t+=n;return o}(e,n,r=void 0===r?e<n?1:-1:b(r),t)}}();const jn=Cn;function Tn(t,e,n,r,i){return i(t,(function(t,i,a){n=r?(r=!1,t):e(n,t,i,a)})),n}function On(t,e,n){var i=(0,r.a)(t)?St:Tn,a=arguments.length<3;return i(t,Me(e),n,a,Ae)}var Mn=Y((function(t,e){if(null==t)return[];var n=e.length;return n>1&&J(t,e[0],e[1])?e=[]:n>2&&J(e[0],e[1],e[2])&&(e=[e[0]]),_n(t,pt(e,1),[])}));const Bn=Mn;var In=r.S&&1/ge(new r.S([,-0]))[1]==1/0?function(t){return new r.S(t)}:function(){};const Rn=In;var Pn=Y((function(t){return function(t,e,n){var r=-1,i=D,a=t.length,o=!0,s=[],c=s;if(n)o=!1,i=Je;else if(a>=200){var u=e?null:Rn(t);if(u)return ge(u);o=!1,i=de,c=new ue}else c=e?[]:s;t:for(;++r<a;){var l=t[r],d=e?e(l):l;if(l=n||0!==l?l:0,o&&d==d){for(var h=c.length;h--;)if(c[h]===d)continue t;e&&c.push(d),s.push(l)}else i(c,d,n)||(c!==s&&c.push(d),s.push(l))}return s}(pt(t,1,ze,!0))}));const An=Pn;var Dn=0;function $n(t){var e=++Dn;return ct(t)+e}var Xn="\0";class Fn{constructor(t={}){this._isDirected=!un(t,"directed")||t.directed,this._isMultigraph=!!un(t,"multigraph")&&t.multigraph,this._isCompound=!!un(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=L(void 0),this._defaultEdgeLabelFn=L(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[Xn]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(t){return this._label=t,this}graph(){return this._label}setDefaultNodeLabel(t){return(0,i.k)(t)||(t=L(t)),this._defaultNodeLabelFn=t,this}nodeCount(){return this._nodeCount}nodes(){return Z(this._nodes)}sources(){var t=this;return Ke(this.nodes(),(function(e){return(0,r.l)(t._in[e])}))}sinks(){var t=this;return Ke(this.nodes(),(function(e){return(0,r.l)(t._out[e])}))}setNodes(t,e){var n=arguments,r=this;return Ze(t,(function(t){n.length>1?r.setNode(t,e):r.setNode(t)})),this}setNode(t,e){return un(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=Xn,this._children[t]={},this._children[Xn][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)}node(t){return this._nodes[t]}hasNode(t){return un(this._nodes,t)}removeNode(t){var e=this;if(un(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],Ze(this.children(t),(function(t){e.setParent(t)})),delete this._children[t]),Ze(Z(this._in[t]),n),delete this._in[t],delete this._preds[t],Ze(Z(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this}setParent(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(dn(e))e=Xn;else{for(var n=e+="";!dn(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this}_removeFromParentsChildList(t){delete this._children[this._parent[t]][t]}parent(t){if(this._isCompound){var e=this._parent[t];if(e!==Xn)return e}}children(t){if(dn(t)&&(t=Xn),this._isCompound){var e=this._children[t];if(e)return Z(e)}else{if(t===Xn)return this.nodes();if(this.hasNode(t))return[]}}predecessors(t){var e=this._preds[t];if(e)return Z(e)}successors(t){var e=this._sucs[t];if(e)return Z(e)}neighbors(t){var e=this.predecessors(t);if(e)return An(e,this.successors(t))}isLeaf(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length}filterNodes(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;Ze(this._nodes,(function(n,r){t(r)&&e.setNode(r,n)})),Ze(this._edgeObjs,(function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))}));var r={};function i(t){var a=n.parent(t);return void 0===a||e.hasNode(a)?(r[t]=a,a):a in r?r[a]:i(a)}return this._isCompound&&Ze(e.nodes(),(function(t){e.setParent(t,i(t))})),e}setDefaultEdgeLabel(t){return(0,i.k)(t)||(t=L(t)),this._defaultEdgeLabelFn=t,this}edgeCount(){return this._edgeCount}edges(){return ln(this._edgeObjs)}setPath(t,e){var n=this,r=arguments;return On(t,(function(t,i){return r.length>1?n.setEdge(t,i,e):n.setEdge(t,i),i})),this}setEdge(){var t,e,n,r,i=!1,a=arguments[0];"object"==typeof a&&null!==a&&"v"in a?(t=a.v,e=a.w,n=a.name,2===arguments.length&&(r=arguments[1],i=!0)):(t=a,e=arguments[1],n=arguments[3],arguments.length>2&&(r=arguments[2],i=!0)),t=""+t,e=""+e,dn(n)||(n=""+n);var o=zn(this._isDirected,t,e,n);if(un(this._edgeLabels,o))return i&&(this._edgeLabels[o]=r),this;if(!dn(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[o]=i?r:this._defaultEdgeLabelFn(t,e,n);var s=function(t,e,n,r){var i=""+e,a=""+n;if(!t&&i>a){var o=i;i=a,a=o}var s={v:i,w:a};return r&&(s.name=r),s}(this._isDirected,t,e,n);return t=s.v,e=s.w,Object.freeze(s),this._edgeObjs[o]=s,Gn(this._preds[e],t),Gn(this._sucs[t],e),this._in[e][o]=s,this._out[t][o]=s,this._edgeCount++,this}edge(t,e,n){var r=1===arguments.length?qn(this._isDirected,arguments[0]):zn(this._isDirected,t,e,n);return this._edgeLabels[r]}hasEdge(t,e,n){var r=1===arguments.length?qn(this._isDirected,arguments[0]):zn(this._isDirected,t,e,n);return un(this._edgeLabels,r)}removeEdge(t,e,n){var r=1===arguments.length?qn(this._isDirected,arguments[0]):zn(this._isDirected,t,e,n),i=this._edgeObjs[r];return i&&(t=i.v,e=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],Hn(this._preds[e],t),Hn(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this}inEdges(t,e){var n=this._in[t];if(n){var r=ln(n);return e?Ke(r,(function(t){return t.v===e})):r}}outEdges(t,e){var n=this._out[t];if(n){var r=ln(n);return e?Ke(r,(function(t){return t.w===e})):r}}nodeEdges(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))}}function Gn(t,e){t[e]?t[e]++:t[e]=1}function Hn(t,e){--t[e]||delete t[e]}function zn(t,e,n,r){var i=""+e,a=""+n;if(!t&&i>a){var o=i;i=a,a=o}return i+""+a+""+(dn(r)?"\0":r)}function qn(t,e){return zn(t,e.v,e.w,e.name)}Fn.prototype._nodeCount=0,Fn.prototype._edgeCount=0;class Un{constructor(){var t={};t._next=t._prev=t,this._sentinel=t}dequeue(){var t=this._sentinel,e=t._prev;if(e!==t)return Yn(e),e}enqueue(t){var e=this._sentinel;t._prev&&t._next&&Yn(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e}toString(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,Jn)),n=n._prev;return"["+t.join(", ")+"]"}}function Yn(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function Jn(t,e){if("_next"!==t&&"_prev"!==t)return e}var Wn=L(1);function Vn(t,e){if(t.nodeCount()<=1)return[];var n=function(t,e){var n=new Fn,r=0,i=0;Ze(t.nodes(),(function(t){n.setNode(t,{v:t,in:0,out:0})})),Ze(t.edges(),(function(t){var a=n.edge(t.v,t.w)||0,o=e(t),s=a+o;n.setEdge(t.v,t.w,s),i=Math.max(i,n.node(t.v).out+=o),r=Math.max(r,n.node(t.w).in+=o)}));var a=jn(i+r+3).map((function(){return new Un})),o=r+1;return Ze(n.nodes(),(function(t){Qn(a,o,n.node(t))})),{graph:n,buckets:a,zeroIdx:o}}(t,e||Wn),r=function(t,e,n){for(var r,i=[],a=e[e.length-1],o=e[0];t.nodeCount();){for(;r=o.dequeue();)Zn(t,e,n,r);for(;r=a.dequeue();)Zn(t,e,n,r);if(t.nodeCount())for(var s=e.length-2;s>0;--s)if(r=e[s].dequeue()){i=i.concat(Zn(t,e,n,r,!0));break}}return i}(n.graph,n.buckets,n.zeroIdx);return vt(an(r,(function(e){return t.outEdges(e.v,e.w)})))}function Zn(t,e,n,r,i){var a=i?[]:void 0;return Ze(t.inEdges(r.v),(function(r){var o=t.edge(r),s=t.node(r.v);i&&a.push({v:r.v,w:r.w}),s.out-=o,Qn(e,n,s)})),Ze(t.outEdges(r.v),(function(r){var i=t.edge(r),a=r.w,o=t.node(a);o.in-=i,Qn(e,n,o)})),t.removeNode(r.v),a}function Qn(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}function Kn(t){var e,n="greedy"===t.graph().acyclicer?Vn(t,(e=t,function(t){return e.edge(t).weight})):function(t){var e=[],n={},r={};function i(a){un(r,a)||(r[a]=!0,n[a]=!0,Ze(t.outEdges(a),(function(t){un(n,t.w)?e.push(t):i(t.w)})),delete n[a])}return Ze(t.nodes(),i),e}(t);Ze(n,(function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,$n("rev"))}))}function tr(t,e,n,r){var i;do{i=$n(r)}while(t.hasNode(i));return n.dummy=e,t.setNode(i,n),i}function er(t){var e=new Fn({multigraph:t.isMultigraph()}).setGraph(t.graph());return Ze(t.nodes(),(function(n){t.children(n).length||e.setNode(n,t.node(n))})),Ze(t.edges(),(function(n){e.setEdge(n,t.edge(n))})),e}function nr(t,e){var n,r,i=t.x,a=t.y,o=e.x-i,s=e.y-a,c=t.width/2,u=t.height/2;if(!o&&!s)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(s)*c>Math.abs(o)*u?(s<0&&(u=-u),n=u*o/s,r=u):(o<0&&(c=-c),n=c,r=c*s/o),{x:i+n,y:a+r}}function rr(t){var e=an(jn(ar(t)+1),(function(){return[]}));return Ze(t.nodes(),(function(n){var r=t.node(n),i=r.rank;dn(i)||(e[i][r.order]=n)})),e}function ir(t,e,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),tr(t,"border",i,e)}function ar(t){return pn(an(t.nodes(),(function(e){var n=t.node(e).rank;if(!dn(n))return n})))}function or(t,e){var n=De();try{return e()}finally{console.log(t+" time: "+(De()-n)+"ms")}}function sr(t,e){return e()}function cr(t,e,n,r,i,a){var o={width:0,height:0,rank:a,borderType:e},s=i[e][a-1],c=tr(t,"border",o,n);i[e][a]=c,t.setParent(c,r),s&&t.setEdge(s,c,{weight:1})}function ur(t){var e=t.graph().rankdir.toLowerCase();("bt"===e||"rl"===e)&&function(t){Ze(t.nodes(),(function(e){hr(t.node(e))})),Ze(t.edges(),(function(e){var n=t.edge(e);Ze(n.points,hr),un(n,"y")&&hr(n)}))}(t),("lr"===e||"rl"===e)&&(function(t){Ze(t.nodes(),(function(e){fr(t.node(e))})),Ze(t.edges(),(function(e){var n=t.edge(e);Ze(n.points,fr),un(n,"x")&&fr(n)}))}(t),lr(t))}function lr(t){Ze(t.nodes(),(function(e){dr(t.node(e))})),Ze(t.edges(),(function(e){dr(t.edge(e))}))}function dr(t){var e=t.width;t.width=t.height,t.height=e}function hr(t){t.y=-t.y}function fr(t){var e=t.x;t.x=t.y,t.y=e}function gr(t){t.graph().dummyChains=[],Ze(t.edges(),(function(e){!function(t,e){var n=e.v,r=t.node(n).rank,i=e.w,a=t.node(i).rank,o=e.name,s=t.edge(e),c=s.labelRank;if(a!==r+1){var u,l,d;for(t.removeEdge(e),d=0,++r;r<a;++d,++r)s.points=[],u=tr(t,"edge",l={width:0,height:0,edgeLabel:s,edgeObj:e,rank:r},"_d"),r===c&&(l.width=s.width,l.height=s.height,l.dummy="edge-label",l.labelpos=s.labelpos),t.setEdge(n,u,{weight:s.weight},o),0===d&&t.graph().dummyChains.push(u),n=u;t.setEdge(n,i,{weight:s.weight},o)}}(t,e)}))}function pr(t){var e={};Ze(t.sources(),(function n(r){var i=t.node(r);if(un(e,r))return i.rank;e[r]=!0;var a=bn(an(t.outEdges(r),(function(e){return n(e.w)-t.edge(e).minlen})));return(a===Number.POSITIVE_INFINITY||null==a)&&(a=0),i.rank=a}))}function vr(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}function yr(t){var e,n,r=new Fn({directed:!1}),i=t.nodes()[0],a=t.nodeCount();for(r.setNode(i,{});br(r,t)<a;)e=wr(r,t),n=r.hasNode(e.v)?vr(t,e):-vr(t,e),mr(r,t,n);return r}function br(t,e){return Ze(t.nodes(),(function n(r){Ze(e.nodeEdges(r),(function(i){var a=i.v,o=r===a?i.w:a;!t.hasNode(o)&&!vr(e,i)&&(t.setNode(o,{}),t.setEdge(r,o,{}),n(o))}))})),t.nodeCount()}function wr(t,e){return wn(e.edges(),(function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return vr(e,n)}))}function mr(t,e,n){Ze(t.nodes(),(function(t){e.node(t).rank+=n}))}function xr(t,e,n){(0,r.a)(e)||(e=[e]);var i=(t.isDirected()?t.successors:t.neighbors).bind(t),a=[],o={};return Ze(e,(function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);_r(t,e,"post"===n,o,i,a)})),a}function _r(t,e,n,r,i,a){un(r,e)||(r[e]=!0,n||a.push(e),Ze(i(e),(function(e){_r(t,e,n,r,i,a)})),n&&a.push(e))}function kr(t){t=function(t){var e=(new Fn).setGraph(t.graph());return Ze(t.nodes(),(function(n){e.setNode(n,t.node(n))})),Ze(t.edges(),(function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})})),e}(t),pr(t);var e,n=yr(t);for(Lr(n),Sr(n,t);e=Cr(n);)Tr(n,t,e,jr(n,t,e))}function Sr(t,e){var n=function(t,e){return xr(t,e,"post")}(t,t.nodes());Ze(n=n.slice(0,n.length-1),(function(n){!function(t,e,n){var r=t.node(n).parent;t.edge(n,r).cutvalue=Er(t,e,n)}(t,e,n)}))}function Er(t,e,n){var r=t.node(n).parent,i=!0,a=e.edge(n,r),o=0;return a||(i=!1,a=e.edge(r,n)),o=a.weight,Ze(e.nodeEdges(n),(function(a){var s=a.v===n,c=s?a.w:a.v;if(c!==r){var u=s===i,l=e.edge(a).weight;if(o+=u?l:-l,function(t,e,n){return t.hasEdge(e,n)}(t,n,c)){var d=t.edge(n,c).cutvalue;o+=u?-d:d}}})),o}function Lr(t,e){arguments.length<2&&(e=t.nodes()[0]),Nr(t,{},1,e)}function Nr(t,e,n,r,i){var a=n,o=t.node(r);return e[r]=!0,Ze(t.neighbors(r),(function(i){un(e,i)||(n=Nr(t,e,n,i,r))})),o.low=a,o.lim=n++,i?o.parent=i:delete o.parent,n}function Cr(t){return nn(t.edges(),(function(e){return t.edge(e).cutvalue<0}))}function jr(t,e,n){var r=n.v,i=n.w;e.hasEdge(r,i)||(r=n.w,i=n.v);var a=t.node(r),o=t.node(i),s=a,c=!1;return a.lim>o.lim&&(s=o,c=!0),wn(Ke(e.edges(),(function(e){return c===Or(t,t.node(e.v),s)&&c!==Or(t,t.node(e.w),s)})),(function(t){return vr(e,t)}))}function Tr(t,e,n,r){var i=n.v,a=n.w;t.removeEdge(i,a),t.setEdge(r.v,r.w,{}),Lr(t),Sr(t,e),function(t,e){var n=nn(t.nodes(),(function(t){return!e.node(t).parent})),r=function(t,e){return xr(t,e,"pre")}(t,n);Ze(r=r.slice(1),(function(n){var r=t.node(n).parent,i=e.edge(n,r),a=!1;i||(i=e.edge(r,n),a=!0),e.node(n).rank=e.node(r).rank+(a?i.minlen:-i.minlen)}))}(t,e)}function Or(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}function Mr(t){switch(t.graph().ranker){case"network-simplex":default:Ir(t);break;case"tight-tree":!function(t){pr(t),yr(t)}(t);break;case"longest-path":Br(t)}}new Error,kr.initLowLimValues=Lr,kr.initCutValues=Sr,kr.calcCutValue=Er,kr.leaveEdge=Cr,kr.enterEdge=jr,kr.exchangeEdges=Tr;var Br=pr;function Ir(t){kr(t)}function Rr(t){var e=tr(t,"root",{},"_root"),n=function(t){var e={};function n(r,i){var a=t.children(r);a&&a.length&&Ze(a,(function(t){n(t,i+1)})),e[r]=i}return Ze(t.children(),(function(t){n(t,1)})),e}(t),r=pn(ln(n))-1,i=2*r+1;t.graph().nestingRoot=e,Ze(t.edges(),(function(e){t.edge(e).minlen*=i}));var a=function(t){return On(t.edges(),(function(e,n){return e+t.edge(n).weight}),0)}(t)+1;Ze(t.children(),(function(o){Pr(t,e,i,a,r,n,o)})),t.graph().nodeRankFactor=i}function Pr(t,e,n,r,i,a,o){var s=t.children(o);if(s.length){var c=ir(t,"_bt"),u=ir(t,"_bb"),l=t.node(o);t.setParent(c,o),l.borderTop=c,t.setParent(u,o),l.borderBottom=u,Ze(s,(function(s){Pr(t,e,n,r,i,a,s);var l=t.node(s),d=l.borderTop?l.borderTop:s,h=l.borderBottom?l.borderBottom:s,f=l.borderTop?r:2*r,g=d!==h?1:i-a[o]+1;t.setEdge(c,d,{weight:f,minlen:g,nestingEdge:!0}),t.setEdge(h,u,{weight:f,minlen:g,nestingEdge:!0})})),t.parent(o)||t.setEdge(e,c,{weight:0,minlen:i+a[o]})}else o!==e&&t.setEdge(e,o,{weight:0,minlen:n})}function Ar(t,e,n){var r=function(t){for(var e;t.hasNode(e=$n("_root")););return e}(t),i=new Fn({compound:!0}).setGraph({root:r}).setDefaultNodeLabel((function(e){return t.node(e)}));return Ze(t.nodes(),(function(a){var o=t.node(a),s=t.parent(a);(o.rank===e||o.minRank<=e&&e<=o.maxRank)&&(i.setNode(a),i.setParent(a,s||r),Ze(t[n](a),(function(e){var n=e.v===a?e.w:e.v,r=i.edge(n,a),o=dn(r)?0:r.weight;i.setEdge(n,a,{weight:t.edge(e).weight+o})})),un(o,"minRank")&&i.setNode(a,{borderLeft:o.borderLeft[e],borderRight:o.borderRight[e]}))})),i}function Dr(t,e){for(var n=0,r=1;r<e.length;++r)n+=$r(t,e[r-1],e[r]);return n}function $r(t,e,n){for(var r=function(t,e){return function(t,e,n){for(var r=-1,i=t.length,a=e.length,o={};++r<i;){var s=r<a?e[r]:void 0;n(o,t[r],s)}return o}(t||[],e||[],H)}(n,an(n,(function(t,e){return e}))),i=vt(an(e,(function(e){return Bn(an(t.outEdges(e),(function(e){return{pos:r[e.w],weight:t.edge(e).weight}})),"pos")}))),a=1;a<n.length;)a<<=1;var o=2*a-1;a-=1;var s=an(new Array(o),(function(){return 0})),c=0;return Ze(i.forEach((function(t){var e=t.pos+a;s[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=s[e+1]),s[e=e-1>>1]+=t.weight;c+=t.weight*n}))),c}function Xr(t,e){var n={};return Ze(t,(function(t,e){var r=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};dn(t.barycenter)||(r.barycenter=t.barycenter,r.weight=t.weight)})),Ze(e.edges(),(function(t){var e=n[t.v],r=n[t.w];!dn(e)&&!dn(r)&&(r.indegree++,e.out.push(n[t.w]))})),function(t){var e=[];function n(t){return function(e){e.merged||(dn(e.barycenter)||dn(t.barycenter)||e.barycenter>=t.barycenter)&&function(t,e){var n=0,r=0;t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=n/r,t.weight=r,t.i=Math.min(e.i,t.i),e.merged=!0}(t,e)}}function r(e){return function(n){n.in.push(e),0==--n.indegree&&t.push(n)}}for(;t.length;){var i=t.pop();e.push(i),Ze(i.in.reverse(),n(i)),Ze(i.out,r(i))}return an(Ke(e,(function(t){return!t.merged})),(function(t){return En(t,["vs","i","barycenter","weight"])}))}(Ke(n,(function(t){return!t.indegree})))}function Fr(t,e){var n=function(t,e){var n={lhs:[],rhs:[]};return Ze(t,(function(t){e(t)?n.lhs.push(t):n.rhs.push(t)})),n}(t,(function(t){return un(t,"barycenter")})),r=n.lhs,i=Bn(n.rhs,(function(t){return-t.i})),a=[],o=0,s=0,c=0;r.sort(function(t){return function(e,n){return e.barycenter<n.barycenter?-1:e.barycenter>n.barycenter?1:t?n.i-e.i:e.i-n.i}}(!!e)),c=Gr(a,i,c),Ze(r,(function(t){c+=t.vs.length,a.push(t.vs),o+=t.barycenter*t.weight,s+=t.weight,c=Gr(a,i,c)}));var u={vs:vt(a)};return s&&(u.barycenter=o/s,u.weight=s),u}function Gr(t,e,n){for(var r;e.length&&(r=We(e)).i<=n;)e.pop(),t.push(r.vs),n++;return n}function Hr(t,e,n,r){var i=t.children(e),a=t.node(e),o=a?a.borderLeft:void 0,s=a?a.borderRight:void 0,c={};o&&(i=Ke(i,(function(t){return t!==o&&t!==s})));var u=function(t,e){return an(e,(function(e){var n=t.inEdges(e);if(n.length){var r=On(n,(function(e,n){var r=t.edge(n),i=t.node(n.v);return{sum:e.sum+r.weight*i.order,weight:e.weight+r.weight}}),{sum:0,weight:0});return{v:e,barycenter:r.sum/r.weight,weight:r.weight}}return{v:e}}))}(t,i);Ze(u,(function(e){if(t.children(e.v).length){var i=Hr(t,e.v,n,r);c[e.v]=i,un(i,"barycenter")&&function(t,e){dn(t.barycenter)?(t.barycenter=e.barycenter,t.weight=e.weight):(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight)}(e,i)}}));var l=Xr(u,n);!function(t,e){Ze(t,(function(t){t.vs=vt(t.vs.map((function(t){return e[t]?e[t].vs:t})))}))}(l,c);var d=Fr(l,r);if(o&&(d.vs=vt([o,d.vs,s]),t.predecessors(o).length)){var h=t.node(t.predecessors(o)[0]),f=t.node(t.predecessors(s)[0]);un(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+h.order+f.order)/(d.weight+2),d.weight+=2}return d}function zr(t){var e=ar(t),n=qr(t,jn(1,e+1),"inEdges"),r=qr(t,jn(e-1,-1,-1),"outEdges"),i=function(t){var e={},n=Ke(t.nodes(),(function(e){return!t.children(e).length})),r=pn(an(n,(function(e){return t.node(e).rank}))),i=an(jn(r+1),(function(){return[]}));return Ze(Bn(n,(function(e){return t.node(e).rank})),(function n(r){if(!un(e,r)){e[r]=!0;var a=t.node(r);i[a.rank].push(r),Ze(t.successors(r),n)}})),i}(t);Yr(t,i);for(var a,o=Number.POSITIVE_INFINITY,s=0,c=0;c<4;++s,++c){Ur(s%2?n:r,s%4>=2);var u=Dr(t,i=rr(t));u<o&&(c=0,a=ce(i),o=u)}Yr(t,a)}function qr(t,e,n){return an(e,(function(e){return Ar(t,e,n)}))}function Ur(t,e){var n=new Fn;Ze(t,(function(t){var r=t.graph().root,i=Hr(t,r,n,e);Ze(i.vs,(function(e,n){t.node(e).order=n})),function(t,e,n){var r,i={};Ze(n,(function(n){for(var a,o,s=t.parent(n);s;){if((a=t.parent(s))?(o=i[a],i[a]=s):(o=r,r=s),o&&o!==s)return void e.setEdge(o,s);s=a}}))}(t,n,i.vs)}))}function Yr(t,e){Ze(e,(function(e){Ze(e,(function(e,n){t.node(e).order=n}))}))}function Jr(t){var e=function(t){var e={},n=0;function r(i){var a=n;Ze(t.children(i),r),e[i]={low:a,lim:n++}}return Ze(t.children(),r),e}(t);Ze(t.graph().dummyChains,(function(n){for(var r=t.node(n),i=r.edgeObj,a=function(t,e,n,r){var i,a,o=[],s=[],c=Math.min(e[n].low,e[r].low),u=Math.max(e[n].lim,e[r].lim);i=n;do{i=t.parent(i),o.push(i)}while(i&&(e[i].low>c||u>e[i].lim));for(a=i,i=r;(i=t.parent(i))!==a;)s.push(i);return{path:o.concat(s.reverse()),lca:a}}(t,e,i.v,i.w),o=a.path,s=a.lca,c=0,u=o[c],l=!0;n!==i.w;){if(r=t.node(n),l){for(;(u=o[c])!==s&&t.node(u).maxRank<r.rank;)c++;u===s&&(l=!1)}if(!l){for(;c<o.length-1&&t.node(u=o[c+1]).minRank<=r.rank;)c++;u=o[c]}t.setParent(n,u),n=t.successors(n)[0]}}))}function Wr(t,e){var n={};return On(e,(function(e,r){var i=0,a=0,o=e.length,s=We(r);return Ze(r,(function(e,c){var u=function(t,e){if(t.node(e).dummy)return nn(t.predecessors(e),(function(e){return t.node(e).dummy}))}(t,e),l=u?t.node(u).order:o;(u||e===s)&&(Ze(r.slice(a,c+1),(function(e){Ze(t.predecessors(e),(function(r){var a=t.node(r),o=a.order;(o<i||l<o)&&(!a.dummy||!t.node(e).dummy)&&Vr(n,r,e)}))})),a=c+1,i=l)})),r})),n}function Vr(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];i||(t[e]=i={}),i[n]=!0}function Zr(t,e,n){if(e>n){var r=e;e=n,n=r}return un(t[e],n)}function Qr(t,e,n,r,i){var a={},o=function(t,e,n,r){var i=new Fn,a=t.graph(),o=function(t,e,n){return function(r,i,a){var o,s=r.node(i),c=r.node(a),u=0;if(u+=s.width/2,un(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":o=-s.width/2;break;case"r":o=s.width/2}if(o&&(u+=n?o:-o),o=0,u+=(s.dummy?e:t)/2,u+=(c.dummy?e:t)/2,u+=c.width/2,un(c,"labelpos"))switch(c.labelpos.toLowerCase()){case"l":o=c.width/2;break;case"r":o=-c.width/2}return o&&(u+=n?o:-o),o=0,u}}(a.nodesep,a.edgesep,r);return Ze(e,(function(e){var r;Ze(e,(function(e){var a=n[e];if(i.setNode(a),r){var s=n[r],c=i.edge(s,a);i.setEdge(s,a,Math.max(o(t,e,r),c||0))}r=e}))})),i}(t,e,n,i),s=i?"borderLeft":"borderRight";function c(t,e){for(var n=o.nodes(),r=n.pop(),i={};r;)i[r]?t(r):(i[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}return c((function(t){a[t]=o.inEdges(t).reduce((function(t,e){return Math.max(t,a[e.v]+o.edge(e))}),0)}),o.predecessors.bind(o)),c((function(e){var n=o.outEdges(e).reduce((function(t,e){return Math.min(t,a[e.w]-o.edge(e))}),Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==s&&(a[e]=Math.max(a[e],n))}),o.successors.bind(o)),Ze(r,(function(t){a[t]=a[n[t]]})),a}function Kr(t,e){return wn(ln(e),(function(e){var n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;return function(t,e){null==t||Ie(t,Ve(e),tt)}(e,(function(e,i){var a=function(t,e){return t.node(e).width}(t,i)/2;n=Math.max(e+a,n),r=Math.min(e-a,r)})),n-r}))}function ti(t){var e,n=rr(t),r=yn(Wr(t,n),function(t,e){var n={};function r(e,r,i,a,o){var s;Ze(jn(r,i),(function(r){s=e[r],t.node(s).dummy&&Ze(t.predecessors(s),(function(e){var r=t.node(e);r.dummy&&(r.order<a||r.order>o)&&Vr(n,e,s)}))}))}return On(e,(function(e,n){var i,a=-1,o=0;return Ze(n,(function(s,c){if("border"===t.node(s).dummy){var u=t.predecessors(s);u.length&&(i=t.node(u[0]).order,r(n,o,c,a,i),o=c,a=i)}r(n,o,n.length,i,e.length)})),n})),n}(t,n)),i={};Ze(["u","d"],(function(a){e="u"===a?n:ln(n).reverse(),Ze(["l","r"],(function(n){"r"===n&&(e=an(e,(function(t){return ln(t).reverse()})));var o=("u"===a?t.predecessors:t.successors).bind(t),s=function(t,e,n,r){var i={},a={},o={};return Ze(e,(function(t){Ze(t,(function(t,e){i[t]=t,a[t]=t,o[t]=e}))})),Ze(e,(function(t){var e=-1;Ze(t,(function(t){var s=r(t);if(s.length)for(var c=((s=Bn(s,(function(t){return o[t]}))).length-1)/2,u=Math.floor(c),l=Math.ceil(c);u<=l;++u){var d=s[u];a[t]===t&&e<o[d]&&!Zr(n,t,d)&&(a[d]=t,a[t]=i[t]=i[d],e=o[d])}}))})),{root:i,align:a}}(0,e,r,o),c=Qr(t,e,s.root,s.align,"r"===n);"r"===n&&(c=fn(c,(function(t){return-t}))),i[a+n]=c}))}));var a=Kr(t,i);return function(t,e){var n=ln(e),r=bn(n),i=pn(n);Ze(["u","d"],(function(n){Ze(["l","r"],(function(a){var o,s=n+a,c=t[s];if(c!==e){var u=ln(c);(o="l"===a?r-bn(u):i-pn(u))&&(t[s]=fn(c,(function(t){return t+o})))}}))}))}(i,a),function(t,e){return fn(t.ul,(function(n,r){if(e)return t[e.toLowerCase()][r];var i=Bn(an(t,r));return(i[1]+i[2])/2}))}(i,t.graph().align)}function ei(t){(function(t){var e=rr(t),n=t.graph().ranksep,r=0;Ze(e,(function(e){var i=pn(an(e,(function(e){return t.node(e).height})));Ze(e,(function(e){t.node(e).y=r+i/2})),r+=i+n}))})(t=er(t)),function(t,e){t&&Re(t,Ve(e))}(ti(t),(function(e,n){t.node(n).x=e}))}function ni(t,e){var n=e&&e.debugTiming?or:sr;n("layout",(function(){var e=n("  buildLayoutGraph",(function(){return function(t){var e=new Fn({multigraph:!0,compound:!0}),n=hi(t.graph());return e.setGraph(yn({},ii,di(n,ri),En(n,ai))),Ze(t.nodes(),(function(n){var r=hi(t.node(n));e.setNode(n,Ge(di(r,oi),si)),e.setParent(n,t.parent(n))})),Ze(t.edges(),(function(n){var r=hi(t.edge(n));e.setEdge(n,yn({},ui,di(r,ci),En(r,li)))})),e}(t)}));n("  runLayout",(function(){!function(t,e){e("    makeSpaceForEdgeLabels",(function(){!function(t){var e=t.graph();e.ranksep/=2,Ze(t.edges(),(function(n){var r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}(t)})),e("    removeSelfEdges",(function(){!function(t){Ze(t.edges(),(function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}}))}(t)})),e("    acyclic",(function(){Kn(t)})),e("    nestingGraph.run",(function(){Rr(t)})),e("    rank",(function(){Mr(er(t))})),e("    injectEdgeLabelProxies",(function(){!function(t){Ze(t.edges(),(function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i={rank:(t.node(e.w).rank-r.rank)/2+r.rank,e:e};tr(t,"edge-proxy",i,"_ep")}}))}(t)})),e("    removeEmptyRanks",(function(){!function(t){var e=bn(an(t.nodes(),(function(e){return t.node(e).rank}))),n=[];Ze(t.nodes(),(function(r){var i=t.node(r).rank-e;n[i]||(n[i]=[]),n[i].push(r)}));var r=0,i=t.graph().nodeRankFactor;Ze(n,(function(e,n){dn(e)&&n%i!=0?--r:r&&Ze(e,(function(e){t.node(e).rank+=r}))}))}(t)})),e("    nestingGraph.cleanup",(function(){!function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,Ze(t.edges(),(function(e){t.edge(e).nestingEdge&&t.removeEdge(e)}))}(t)})),e("    normalizeRanks",(function(){!function(t){var e=bn(an(t.nodes(),(function(e){return t.node(e).rank})));Ze(t.nodes(),(function(n){var r=t.node(n);un(r,"rank")&&(r.rank-=e)}))}(t)})),e("    assignRankMinMax",(function(){!function(t){var e=0;Ze(t.nodes(),(function(n){var r=t.node(n);r.borderTop&&(r.minRank=t.node(r.borderTop).rank,r.maxRank=t.node(r.borderBottom).rank,e=pn(e,r.maxRank))})),t.graph().maxRank=e}(t)})),e("    removeEdgeLabelProxies",(function(){!function(t){Ze(t.nodes(),(function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))}))}(t)})),e("    normalize.run",(function(){gr(t)})),e("    parentDummyChains",(function(){Jr(t)})),e("    addBorderSegments",(function(){!function(t){Ze(t.children(),(function e(n){var r=t.children(n),i=t.node(n);if(r.length&&Ze(r,e),un(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var a=i.minRank,o=i.maxRank+1;a<o;++a)cr(t,"borderLeft","_bl",n,i,a),cr(t,"borderRight","_br",n,i,a)}}))}(t)})),e("    order",(function(){zr(t)})),e("    insertSelfEdges",(function(){!function(t){Ze(rr(t),(function(e){var n=0;Ze(e,(function(e,r){var i=t.node(e);i.order=r+n,Ze(i.selfEdges,(function(e){tr(t,"selfedge",{width:e.label.width,height:e.label.height,rank:i.rank,order:r+ ++n,e:e.e,label:e.label},"_se")})),delete i.selfEdges}))}))}(t)})),e("    adjustCoordinateSystem",(function(){!function(t){var e=t.graph().rankdir.toLowerCase();("lr"===e||"rl"===e)&&lr(t)}(t)})),e("    position",(function(){ei(t)})),e("    positionSelfEdges",(function(){!function(t){Ze(t.nodes(),(function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,a=r.y,o=n.x-i,s=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*o/3,y:a-s},{x:i+5*o/6,y:a-s},{x:i+o,y:a},{x:i+5*o/6,y:a+s},{x:i+2*o/3,y:a+s}],n.label.x=n.x,n.label.y=n.y}}))}(t)})),e("    removeBorderNodes",(function(){!function(t){Ze(t.nodes(),(function(e){if(t.children(e).length){var n=t.node(e),r=t.node(n.borderTop),i=t.node(n.borderBottom),a=t.node(We(n.borderLeft)),o=t.node(We(n.borderRight));n.width=Math.abs(o.x-a.x),n.height=Math.abs(i.y-r.y),n.x=a.x+n.width/2,n.y=r.y+n.height/2}})),Ze(t.nodes(),(function(e){"border"===t.node(e).dummy&&t.removeNode(e)}))}(t)})),e("    normalize.undo",(function(){!function(t){Ze(t.graph().dummyChains,(function(e){var n,r=t.node(e),i=r.edgeLabel;for(t.setEdge(r.edgeObj,i);r.dummy;)n=t.successors(e)[0],t.removeNode(e),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),e=n,r=t.node(e)}))}(t)})),e("    fixupEdgeLabelCoords",(function(){!function(t){Ze(t.edges(),(function(e){var n=t.edge(e);if(un(n,"x"))switch(("l"===n.labelpos||"r"===n.labelpos)&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))}(t)})),e("    undoCoordinateSystem",(function(){ur(t)})),e("    translateGraph",(function(){!function(t){var e=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,a=t.graph(),o=a.marginx||0,s=a.marginy||0;function c(t){var a=t.x,o=t.y,s=t.width,c=t.height;e=Math.min(e,a-s/2),n=Math.max(n,a+s/2),r=Math.min(r,o-c/2),i=Math.max(i,o+c/2)}Ze(t.nodes(),(function(e){c(t.node(e))})),Ze(t.edges(),(function(e){var n=t.edge(e);un(n,"x")&&c(n)})),e-=o,r-=s,Ze(t.nodes(),(function(n){var i=t.node(n);i.x-=e,i.y-=r})),Ze(t.edges(),(function(n){var i=t.edge(n);Ze(i.points,(function(t){t.x-=e,t.y-=r})),un(i,"x")&&(i.x-=e),un(i,"y")&&(i.y-=r)})),a.width=n-e+o,a.height=i-r+s}(t)})),e("    assignNodeIntersects",(function(){!function(t){Ze(t.edges(),(function(e){var n,r,i=t.edge(e),a=t.node(e.v),o=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=o,r=a),i.points.unshift(nr(a,n)),i.points.push(nr(o,r))}))}(t)})),e("    reversePoints",(function(){!function(t){Ze(t.edges(),(function(e){var n=t.edge(e);n.reversed&&n.points.reverse()}))}(t)})),e("    acyclic.undo",(function(){!function(t){Ze(t.edges(),(function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}}))}(t)}))}(e,n)})),n("  updateInputGraph",(function(){!function(t,e){Ze(t.nodes(),(function(n){var r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,e.children(n).length&&(r.width=i.width,r.height=i.height))})),Ze(t.edges(),(function(n){var r=t.edge(n),i=e.edge(n);r.points=i.points,un(i,"x")&&(r.x=i.x,r.y=i.y)})),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,e)}))}))}var ri=["nodesep","edgesep","ranksep","marginx","marginy"],ii={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},ai=["acyclicer","ranker","rankdir","align"],oi=["width","height"],si={width:0,height:0},ci=["minlen","weight","width","height","labeloffset"],ui={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},li=["labelpos"];function di(t,e){return fn(En(t,e),Number)}function hi(t){var e={};return Ze(t,(function(t,n){e[n.toLowerCase()]=t})),e}},3175:function(t,e,n){n.d(e,{l:function(){return c}});var r=n(8667),i=n(7267),a=n(5560);function o(t){return t[0]}function s(t){return t[1]}function c(t,e){var n=(0,i.c)(!0),c=null,u=a.y,l=null;function d(a){var o,s,d,h=(a=(0,r.a)(a)).length,f=!1;for(null==c&&(l=u(d=(0,i.p)())),o=0;o<=h;++o)!(o<h&&n(s=a[o],o,a))===f&&((f=!f)?l.lineStart():l.lineEnd()),f&&l.point(+t(s,o,a),+e(s,o,a));if(d)return l=null,d+""||null}return t="function"==typeof t?t:void 0===t?o:(0,i.c)(t),e="function"==typeof e?e:void 0===e?s:(0,i.c)(e),d.x=function(e){return arguments.length?(t="function"==typeof e?e:(0,i.c)(+e),d):t},d.y=function(t){return arguments.length?(e="function"==typeof t?t:(0,i.c)(+t),d):e},d.defined=function(t){return arguments.length?(n="function"==typeof t?t:(0,i.c)(!!t),d):n},d.curve=function(t){return arguments.length?(u=t,null!=c&&(l=u(c)),d):u},d.context=function(t){return arguments.length?(null==t?c=l=null:l=u(c=t),d):c},d}},1183:function(t,e,n){n.d(e,{p:function(){return s},s:function(){return f}});var r=n(9726),i=n(5560),a=n(3175);let o=0;const s=function(t){let e=t.match(/^([#+~-])?(\w+)(~\w+~|\[])?\s+(\w+) *([$*])?$/),n=t.match(/^([#+|~-])?(\w+) *\( *(.*)\) *([$*])? *(\w*[[\]|~]*\s*\w*~?)$/);return e&&!n?c(e):n?u(n):l(t)},c=function(t){let e="",n="";try{let i=t[1]?t[1].trim():"",a=t[2]?t[2].trim():"",o=t[3]?(0,r.D)(t[3].trim()):"",s=t[4]?t[4].trim():"",c=t[5]?t[5].trim():"";n=i+a+o+" "+s,e=h(c)}catch{n=t}return{displayText:n,cssStyle:e}},u=function(t){let e="",n="";try{let i=t[1]?t[1].trim():"",a=t[2]?t[2].trim():"",o=t[3]?(0,r.D)(t[3].trim()):"",s=t[4]?t[4].trim():"";n=i+a+"("+o+")"+(t[5]?" : "+(0,r.D)(t[5]).trim():""),e=h(s)}catch{n=t}return{displayText:n,cssStyle:e}},l=function(t){let e="",n="",i="",a=t.indexOf("("),o=t.indexOf(")");if(a>1&&o>a&&o<=t.length){let s="",c="",u=t.substring(0,1);u.match(/\w/)?c=t.substring(0,a).trim():(u.match(/[#+~-]/)&&(s=u),c=t.substring(1,a).trim());const l=t.substring(a+1,o);t.substring(o+1,1),n=h(t.substring(o+1,o+2)),e=s+c+"("+(0,r.D)(l.trim())+")",o<t.length&&(i=t.substring(o+2).trim(),""!==i&&(i=" : "+(0,r.D)(i),e+=i))}else e=(0,r.D)(t);return{displayText:e,cssStyle:n}},d=function(t,e,n,r){let i=s(e);const a=t.append("tspan").attr("x",r.padding).text(i.displayText);""!==i.cssStyle&&a.attr("style",i.cssStyle),n||a.attr("dy",r.textHeight)},h=function(t){switch(t){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}},f={drawClass:function(t,e,n,i){r.l.debug("Rendering class ",e,n);const a=e.id,o={id:a,label:e.id,width:0,height:0},s=t.append("g").attr("id",i.db.lookUpDomId(a)).attr("class","classGroup");let c;c=e.link?s.append("svg:a").attr("xlink:href",e.link).attr("target",e.linkTarget).append("text").attr("y",n.textHeight+n.padding).attr("x",0):s.append("text").attr("y",n.textHeight+n.padding).attr("x",0);let u=!0;e.annotations.forEach((function(t){const e=c.append("tspan").text("«"+t+"»");u||e.attr("dy",n.textHeight),u=!1}));let l=e.id;void 0!==e.type&&""!==e.type&&(l+="<"+e.type+">");const h=c.append("tspan").text(l).attr("class","title");u||h.attr("dy",n.textHeight);const f=c.node().getBBox().height,g=s.append("line").attr("x1",0).attr("y1",n.padding+f+n.dividerMargin/2).attr("y2",n.padding+f+n.dividerMargin/2),p=s.append("text").attr("x",n.padding).attr("y",f+n.dividerMargin+n.textHeight).attr("fill","white").attr("class","classText");u=!0,e.members.forEach((function(t){d(p,t,u,n),u=!1}));const v=p.node().getBBox(),y=s.append("line").attr("x1",0).attr("y1",n.padding+f+n.dividerMargin+v.height).attr("y2",n.padding+f+n.dividerMargin+v.height),b=s.append("text").attr("x",n.padding).attr("y",f+2*n.dividerMargin+v.height+n.textHeight).attr("fill","white").attr("class","classText");u=!0,e.methods.forEach((function(t){d(b,t,u,n),u=!1}));const w=s.node().getBBox();var m=" ";e.cssClasses.length>0&&(m+=e.cssClasses.join(" "));const x=s.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",w.width+2*n.padding).attr("height",w.height+n.padding+.5*n.dividerMargin).attr("class",m).node().getBBox().width;return c.node().childNodes.forEach((function(t){t.setAttribute("x",(x-t.getBBox().width)/2)})),e.tooltip&&c.insert("title").text(e.tooltip),g.attr("x2",x),y.attr("x2",x),o.width=x,o.height=w.height+n.padding+.5*n.dividerMargin,o},drawEdge:function(t,e,n,s,c){const u=function(t){switch(t){case c.db.relationType.AGGREGATION:return"aggregation";case c.db.relationType.EXTENSION:return"extension";case c.db.relationType.COMPOSITION:return"composition";case c.db.relationType.DEPENDENCY:return"dependency";case c.db.relationType.LOLLIPOP:return"lollipop"}};e.points=e.points.filter((t=>!Number.isNaN(t.y)));const l=e.points,d=(0,a.l)().x((function(t){return t.x})).y((function(t){return t.y})).curve(i.G),h=t.append("path").attr("d",d(l)).attr("id","edge"+o).attr("class","relation");let f,g,p="";s.arrowMarkerAbsolute&&(p=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,p=p.replace(/\(/g,"\\("),p=p.replace(/\)/g,"\\)")),1==n.relation.lineType&&h.attr("class","relation dashed-line"),10==n.relation.lineType&&h.attr("class","relation dotted-line"),"none"!==n.relation.type1&&h.attr("marker-start","url("+p+"#"+u(n.relation.type1)+"Start)"),"none"!==n.relation.type2&&h.attr("marker-end","url("+p+"#"+u(n.relation.type2)+"End)");const v=e.points.length;let y,b,w,m,x=i.u.calcLabelPosition(e.points);if(f=x.x,g=x.y,v%2!=0&&v>1){let t=i.u.calcCardinalityPosition("none"!==n.relation.type1,e.points,e.points[0]),a=i.u.calcCardinalityPosition("none"!==n.relation.type2,e.points,e.points[v-1]);r.l.debug("cardinality_1_point "+JSON.stringify(t)),r.l.debug("cardinality_2_point "+JSON.stringify(a)),y=t.x,b=t.y,w=a.x,m=a.y}if(void 0!==n.title){const e=t.append("g").attr("class","classLabel"),r=e.append("text").attr("class","label").attr("x",f).attr("y",g).attr("fill","red").attr("text-anchor","middle").text(n.title);window.label=r;const i=r.node().getBBox();e.insert("rect",":first-child").attr("class","box").attr("x",i.x-s.padding/2).attr("y",i.y-s.padding/2).attr("width",i.width+s.padding).attr("height",i.height+s.padding)}r.l.info("Rendering relation "+JSON.stringify(n)),void 0!==n.relationTitle1&&"none"!==n.relationTitle1&&t.append("g").attr("class","cardinality").append("text").attr("class","type1").attr("x",y).attr("y",b).attr("fill","black").attr("font-size","6").text(n.relationTitle1),void 0!==n.relationTitle2&&"none"!==n.relationTitle2&&t.append("g").attr("class","cardinality").append("text").attr("class","type2").attr("x",w).attr("y",m).attr("fill","black").attr("font-size","6").text(n.relationTitle2),o++},drawNote:function(t,e,n,i){r.l.debug("Rendering note ",e,n);const a=e.id,o={id:a,text:e.text,width:0,height:0},s=t.append("g").attr("id",a).attr("class","classGroup");let c=s.append("text").attr("y",n.textHeight+n.padding).attr("x",0);const u=JSON.parse(`"${e.text}"`).split("\n");u.forEach((function(t){r.l.debug(`Adding line: ${t}`),c.append("tspan").text(t).attr("class","title").attr("dy",n.textHeight)}));const l=s.node().getBBox(),d=s.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",l.width+2*n.padding).attr("height",l.height+u.length*n.textHeight+n.padding+.5*n.dividerMargin).node().getBBox().width;return c.node().childNodes.forEach((function(t){t.setAttribute("x",(d-t.getBBox().width)/2)})),o.width=d,o.height=l.height+u.length*n.textHeight+n.padding+.5*n.dividerMargin,o},parseMember:s}}}]);
//# sourceMappingURL=commons-b2d5390305cf41076681.js.map