"use strict";(self.webpackChunkwebsite_cyt=self.webpackChunkwebsite_cyt||[]).push([[853],{6853:function(e,t,s){s.r(t),s.d(t,{diagram:function(){return V}});var o=s(1966),r=s(7297),i=s(9726),a=s(4749),n=s(5560);const d="rect",c="rectWithTitle",l="statediagram",p=`${l}-state`,g="transition",b=`${g} note-edge`,h=`${l}-note`,u=`${l}-cluster`,y=`${l}-cluster-alt`,f="parent",w="note",x="----",m=`----${f}`,$="fill:none",T="fill: #333",S="text",k="normal";let D={},v=0;function A(e="",t=0,s="",o=x){return`state-${e}${null!==s&&s.length>0?`${o}${s}`:""}-${t}`}const B=(e,t,s,r,a,n)=>{const l=s.id,g=function(e){return null==e?"":e.classes?e.classes.join(" "):""}(r[l]);if("root"!==l){let t=d;!0===s.start&&(t="start"),!1===s.start&&(t="end"),s.type!==o.a&&(t=s.type),D[l]||(D[l]={id:l,shape:t,description:i.f.sanitizeText(l,(0,i.g)()),classes:`${g} ${p}`});const r=D[l];s.description&&(Array.isArray(r.description)?(r.shape=c,r.description.push(s.description)):r.description.length>0?(r.shape=c,r.description===l?r.description=[s.description]:r.description=[r.description,s.description]):(r.shape=d,r.description=s.description),r.description=i.f.sanitizeTextOrArray(r.description,(0,i.g)())),1===r.description.length&&r.shape===c&&(r.shape=d),!r.type&&s.doc&&(i.l.info("Setting cluster for ",l,C(s)),r.type="group",r.dir=C(s),r.shape=s.type===o.b?"divider":"roundedWithTitle",r.classes=r.classes+" "+u+" "+(n?y:""));const a={labelStyle:"",shape:r.shape,labelText:r.description,classes:r.classes,style:"",id:l,dir:r.dir,domId:A(l,v),type:r.type,padding:15,centerLabel:!0};if(s.note){const t={labelStyle:"",shape:"note",labelText:s.note.text,classes:h,style:"",id:l+"----note-"+v,domId:A(l,v,w),type:r.type,padding:15},o={labelStyle:"",shape:"noteGroup",labelText:s.note.text,classes:r.classes,style:"",id:l+m,domId:A(l,v,f),type:"group",padding:0};v++;const i=l+m;e.setNode(i,o),e.setNode(t.id,t),e.setNode(l,a),e.setParent(l,i),e.setParent(t.id,i);let n=l,d=t.id;"left of"===s.note.position&&(n=t.id,d=l),e.setEdge(n,d,{arrowhead:"none",arrowType:"",style:$,labelStyle:"",classes:b,arrowheadStyle:T,labelpos:"c",labelType:S,thickness:k})}else e.setNode(l,a)}t&&"root"!==t.id&&(i.l.trace("Setting node ",l," to be child of its parent ",t.id),e.setParent(l,t.id)),s.doc&&(i.l.trace("Adding nodes children "),E(e,s,s.doc,r,a,!n))},E=(e,t,s,r,a,n)=>{i.l.trace("items",s),s.forEach((s=>{switch(s.stmt){case o.c:case o.a:B(e,t,s,r,a,n);break;case o.S:{B(e,t,s.state1,r,a,n),B(e,t,s.state2,r,a,n);const o={id:"edge"+v,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:$,labelStyle:"",label:i.f.sanitizeText(s.description,(0,i.g)()),arrowheadStyle:T,labelpos:"c",labelType:S,thickness:k,classes:g};e.setEdge(s.state1.id,s.state2.id,o,v),v++}}}))},C=(e,t=o.e)=>{let s=t;if(e.doc)for(let o=0;o<e.doc.length;o++){const t=e.doc[o];"dir"===t.stmt&&(s=t.value)}return s},R={setConf:function(e){const t=Object.keys(e);for(const s of t)e[s]},getClasses:function(e,t){i.l.trace("Extracting classes"),t.db.clear();try{return t.parser.parse(e),t.db.extract(t.db.getRootDocV2()),t.db.getClasses()}catch(s){return s}},draw:function(e,t,s,c){i.l.info("Drawing state diagram (v2)",t),D={};let p=c.db.getDirection();void 0===p&&(p=o.D);const{securityLevel:g,state:b}=(0,i.g)(),h=b.nodeSpacing||50,u=b.rankSpacing||50;i.l.info(c.db.getRootDocV2()),c.db.extract(c.db.getRootDocV2()),i.l.info(c.db.getRootDocV2());const y=c.db.getStates(),f=new r.G({multigraph:!0,compound:!0}).setGraph({rankdir:C(c.db.getRootDocV2()),nodesep:h,ranksep:u,marginx:8,marginy:8}).setDefaultEdgeLabel((function(){return{}}));let w;B(f,void 0,c.db.getRootDocV2(),y,c.db,!0),"sandbox"===g&&(w=(0,i.h)("#i"+t));const x="sandbox"===g?(0,i.h)(w.nodes()[0].contentDocument.body):(0,i.h)("body"),m=x.select(`[id="${t}"]`),$=x.select("#"+t+" g");(0,a.r)($,f,["barb"],l,t);n.u.insertTitle(m,"statediagramTitleText",b.titleTopMargin,c.db.getDiagramTitle());const T=m.node().getBBox(),S=T.width+16,k=T.height+16;m.attr("class",l);const v=m.node().getBBox();(0,n.v)(m,k,S,b.useMaxWidth);const A=`${v.x-8} ${v.y-8} ${S} ${k}`;i.l.debug(`viewBox ${A}`),m.attr("viewBox",A);const E=document.querySelectorAll('[id="'+t+'"] .edgeLabel .label');for(const o of E){const e=o.getBBox(),t=document.createElementNS("http://www.w3.org/2000/svg",d);t.setAttribute("rx",0),t.setAttribute("ry",0),t.setAttribute("width",e.width),t.setAttribute("height",e.height),o.insertBefore(t,o.firstChild)}}},V={parser:o.p,db:o.d,renderer:R,styles:o.s,init:e=>{e.state||(e.state={}),e.state.arrowMarkerAbsolute=e.arrowMarkerAbsolute,o.d.clear()}}}}]);
//# sourceMappingURL=853-a933872527b9a9289b94.js.map